openapi: 3.0.0
info:
  title: (Legacy) Customer Profile API
  description: >
    Represents customer information related to multiple customer data
    operations. A customer

    is identified by a customer `id` in NewStore. You can use this resource

    to manage customers and also for clienteling activities in NewStore
    applications.


    Typically, customers are created automatically

    when they place an order online or when they provide their email address

    during an in-store purchase.


    **Note:**

    The **Customer Profile API v1** will be deprecated and NewStore will
    announce the migration plan soon for the retailers using this API. 

    We recommend that all new integrations use the latest **[Customer Profile
    API v2](https://docs.p.newstore.partners/#/typescript/customers)**.

    Please use the [migration
    guide](/developers/troubleshooting/migration-API-v1-v2/)

    to migrate from this version to the new version.
  version: 1.0.0
  contact:
    name: Team Clienteling
    url: https://goodscloud.atlassian.net/wiki/spaces/CLIEN/overview
    email: team-clienteling@newstore.com
  x-api-id: team-clienteling-customer-profile-api
  x-audience: external-public
tags:
  - name: customerProfile
    description: Customer profiles operations
  - name: address
    description: Customer profile address operations
  - name: data
    description: Data operations
  - name: tokenOperations
    description: Token operations
servers:
  - url: https://{tenant}.{environment}.newstore.net/v1/d/pii
    description: The public pii API server
    variables:
      tenant:
        default: dodici
        description: please add here the desired tenant id
      environment:
        enum:
          - p
          - s
        default: s
components:
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    ListProfilesResponse:
      type: object
      required:
        - profiles
        - pagination_info
      description: List profiles response.
      properties:
        profiles:
          type: array
          items:
            type: object
            required:
              - id
              - display_id
              - email
              - full_name
              - phone_number
              - store_id
              - created_by
              - extended_attributes
              - created_at
              - updated_at
            properties:
              id:
                type: string
                example: NS-EU-01FXX4RSTKMVBFPBVZFPGM97ZW-01FXX4S1V1R8M4PF9H1S1D82CX
                description: The profile identifier.
                x-oapi-codegen-extra-tags:
                  binding: required
              display_id:
                type: string
                description: The human readable profile identifier.
              email:
                type: string
                description: Email of the customer.
                x-oapi-codegen-extra-tags:
                  binding: required
              full_name:
                type: string
                maximum: 256
                description: >-
                  Full name of the customer, including first, middle and last
                  name.
              phone_number:
                type: string
                description: Phone number of the customer in E.164 format.
              store_id:
                type: string
                description: The identifier of the store, profile is being created in.
              created_by:
                type: string
                description: The identifier of the associate creating profile
              extended_attributes:
                type: object
                minProperties: 0
                maxProperties: 20
                description: Additional attributes for a customer.
                example:
                  loyalty_id:
                    data_type: string
                    value: '0123456789'
                additionalProperties:
                  type: object
                  required:
                    - data_type
                    - value
                  properties:
                    data_type:
                      type: string
                      example: string
                      description: Data type of the additional attribute.
                      x-oapi-codegen-extra-tags:
                        binding: required
                    value:
                      type: string
                      example: '0123456789'
                      description: Data type of the additional attribute.
                      x-oapi-codegen-extra-tags:
                        binding: required
              created_at:
                type: string
                format: date-time
                description: Timestamp of the profile creation.
              updated_at:
                type: string
                format: date-time
                description: Timestamp of the latest profile update.
          x-oapi-codegen-extra-tags:
            binding: required
        pagination_info:
          x-oapi-codegen-extra-tags:
            binding: required
          allOf:
            - type: object
              required:
                - count
                - total
                - offset
              description: Pagination info.
              properties:
                count:
                  type: integer
                  format: int64
                  description: Amount of items in the current page.
                total:
                  type: integer
                  format: int64
                  description: Total amount of the items for given filters set.
                offset:
                  type: integer
                  format: int64
                  description: Offset of the current page.
    ErrorResponse:
      type: object
      description: Model for error response.
      required:
        - request_id
        - message
        - type
        - title
      properties:
        request_id:
          type: string
          example: some-request-id
          description: The request identifier.
          x-oapi-codegen-extra-tags:
            binding: required
        message:
          type: string
          description: The error message.
          example: An error happened.
          x-oapi-codegen-extra-tags:
            binding: required
        type:
          type: string
          default: about:blank
          format: uri
          description: A URI reference [RFC3986] that identifies the problem type.
          x-oapi-codegen-extra-tags:
            binding: required
        title:
          type: string
          description: A short, human-readable summary of the problem type.
          x-oapi-codegen-extra-tags:
            binding: required
    CreateProfileRequest:
      allOf:
        - type: object
          description: Create profile request.
          required:
            - email
          properties:
            email:
              type: string
              format: email
              description: Email of the customer.
              x-oapi-codegen-extra-tags:
                binding: required
        - type: object
          properties:
            full_name:
              type: string
              maximum: 256
              description: >-
                Full name of the customer, including first, middle and last
                name.
              nullable: true
              x-oapi-codegen-extra-tags:
                binding: omitempty,max=256
            phone_number:
              type: string
              description: Phone number of the customer in E.164 format.
              nullable: true
              x-oapi-codegen-extra-tags:
                binding: omitempty,e164WithEmpty
            store_id:
              type: string
              description: The identifier of the store, profile is being created in.
              nullable: true
            created_by:
              type: string
              description: The identifier of the associate creating profile
              nullable: true
            extended_attributes:
              minItems: 0
              maxItems: 20
              allOf:
                - type: object
                - type: object
                  description: Additional attributes for a customer.
                  example:
                    loyalty_id:
                      data_type: string
                      value: '0123456789'
                  additionalProperties:
                    type: object
                    required:
                      - data_type
                      - value
                    properties:
                      data_type:
                        type: string
                        example: string
                        description: Data type of the additional attribute.
                        x-oapi-codegen-extra-tags:
                          binding: required
                      value:
                        type: string
                        example: '0123456789'
                        description: Data type of the additional attribute.
                        x-oapi-codegen-extra-tags:
                          binding: required
    ProfileRequestModel:
      type: object
      properties:
        full_name:
          type: string
          maximum: 256
          description: Full name of the customer, including first, middle and last name.
          nullable: true
          x-oapi-codegen-extra-tags:
            binding: omitempty,max=256
        phone_number:
          type: string
          description: Phone number of the customer in E.164 format.
          nullable: true
          x-oapi-codegen-extra-tags:
            binding: omitempty,e164WithEmpty
        store_id:
          type: string
          description: The identifier of the store, profile is being created in.
          nullable: true
        created_by:
          type: string
          description: The identifier of the associate creating profile
          nullable: true
        extended_attributes:
          minItems: 0
          maxItems: 20
          allOf:
            - type: object
            - type: object
              description: Additional attributes for a customer.
              example:
                loyalty_id:
                  data_type: string
                  value: '0123456789'
              additionalProperties:
                type: object
                required:
                  - data_type
                  - value
                properties:
                  data_type:
                    type: string
                    example: string
                    description: Data type of the additional attribute.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  value:
                    type: string
                    example: '0123456789'
                    description: Data type of the additional attribute.
                    x-oapi-codegen-extra-tags:
                      binding: required
    ExtendedAttributesRequestModel:
      type: object
      description: Additional attributes for a customer.
      example:
        loyalty_id:
          data_type: string
          value: '0123456789'
      additionalProperties:
        type: object
        required:
          - data_type
          - value
        properties:
          data_type:
            type: string
            example: string
            description: Data type of the additional attribute.
            x-oapi-codegen-extra-tags:
              binding: required
          value:
            type: string
            example: '0123456789'
            description: Data type of the additional attribute.
            x-oapi-codegen-extra-tags:
              binding: required
    ExtendedAttributesResponseModel:
      type: object
      minProperties: 0
      maxProperties: 20
      description: Additional attributes for a customer.
      example:
        loyalty_id:
          data_type: string
          value: '0123456789'
      additionalProperties:
        type: object
        required:
          - data_type
          - value
        properties:
          data_type:
            type: string
            example: string
            description: Data type of the additional attribute.
            x-oapi-codegen-extra-tags:
              binding: required
          value:
            type: string
            example: '0123456789'
            description: Data type of the additional attribute.
            x-oapi-codegen-extra-tags:
              binding: required
    ExtendedAttributeModel:
      type: object
      required:
        - data_type
        - value
      properties:
        data_type:
          type: string
          example: string
          description: Data type of the additional attribute.
          x-oapi-codegen-extra-tags:
            binding: required
        value:
          type: string
          example: '0123456789'
          description: Data type of the additional attribute.
          x-oapi-codegen-extra-tags:
            binding: required
    CreateProfileResponse:
      description: Create profile response.
      type: object
      required:
        - id
        - display_id
        - email
        - full_name
        - phone_number
        - store_id
        - created_by
        - extended_attributes
        - created_at
        - updated_at
      properties:
        id:
          type: string
          example: NS-EU-01FXX4RSTKMVBFPBVZFPGM97ZW-01FXX4S1V1R8M4PF9H1S1D82CX
          description: The profile identifier.
          x-oapi-codegen-extra-tags:
            binding: required
        display_id:
          type: string
          description: The human readable profile identifier.
        email:
          type: string
          description: Email of the customer.
          x-oapi-codegen-extra-tags:
            binding: required
        full_name:
          type: string
          maximum: 256
          description: Full name of the customer, including first, middle and last name.
        phone_number:
          type: string
          description: Phone number of the customer in E.164 format.
        store_id:
          type: string
          description: The identifier of the store, profile is being created in.
        created_by:
          type: string
          description: The identifier of the associate creating profile
        extended_attributes:
          type: object
          minProperties: 0
          maxProperties: 20
          description: Additional attributes for a customer.
          example:
            loyalty_id:
              data_type: string
              value: '0123456789'
          additionalProperties:
            type: object
            required:
              - data_type
              - value
            properties:
              data_type:
                type: string
                example: string
                description: Data type of the additional attribute.
                x-oapi-codegen-extra-tags:
                  binding: required
              value:
                type: string
                example: '0123456789'
                description: Data type of the additional attribute.
                x-oapi-codegen-extra-tags:
                  binding: required
        created_at:
          type: string
          format: date-time
          description: Timestamp of the profile creation.
        updated_at:
          type: string
          format: date-time
          description: Timestamp of the latest profile update.
    ProfileResponse:
      type: object
      required:
        - id
        - display_id
        - email
        - full_name
        - phone_number
        - store_id
        - created_by
        - extended_attributes
        - created_at
        - updated_at
      properties:
        id:
          type: string
          example: NS-EU-01FXX4RSTKMVBFPBVZFPGM97ZW-01FXX4S1V1R8M4PF9H1S1D82CX
          description: The profile identifier.
          x-oapi-codegen-extra-tags:
            binding: required
        display_id:
          type: string
          description: The human readable profile identifier.
        email:
          type: string
          description: Email of the customer.
          x-oapi-codegen-extra-tags:
            binding: required
        full_name:
          type: string
          maximum: 256
          description: Full name of the customer, including first, middle and last name.
        phone_number:
          type: string
          description: Phone number of the customer in E.164 format.
        store_id:
          type: string
          description: The identifier of the store, profile is being created in.
        created_by:
          type: string
          description: The identifier of the associate creating profile
        extended_attributes:
          type: object
          minProperties: 0
          maxProperties: 20
          description: Additional attributes for a customer.
          example:
            loyalty_id:
              data_type: string
              value: '0123456789'
          additionalProperties:
            type: object
            required:
              - data_type
              - value
            properties:
              data_type:
                type: string
                example: string
                description: Data type of the additional attribute.
                x-oapi-codegen-extra-tags:
                  binding: required
              value:
                type: string
                example: '0123456789'
                description: Data type of the additional attribute.
                x-oapi-codegen-extra-tags:
                  binding: required
        created_at:
          type: string
          format: date-time
          description: Timestamp of the profile creation.
        updated_at:
          type: string
          format: date-time
          description: Timestamp of the latest profile update.
    GetProfileResponse:
      description: Get profile response.
      type: object
      required:
        - id
        - display_id
        - email
        - full_name
        - phone_number
        - store_id
        - created_by
        - extended_attributes
        - created_at
        - updated_at
      properties:
        id:
          type: string
          example: NS-EU-01FXX4RSTKMVBFPBVZFPGM97ZW-01FXX4S1V1R8M4PF9H1S1D82CX
          description: The profile identifier.
          x-oapi-codegen-extra-tags:
            binding: required
        display_id:
          type: string
          description: The human readable profile identifier.
        email:
          type: string
          description: Email of the customer.
          x-oapi-codegen-extra-tags:
            binding: required
        full_name:
          type: string
          maximum: 256
          description: Full name of the customer, including first, middle and last name.
        phone_number:
          type: string
          description: Phone number of the customer in E.164 format.
        store_id:
          type: string
          description: The identifier of the store, profile is being created in.
        created_by:
          type: string
          description: The identifier of the associate creating profile
        extended_attributes:
          type: object
          minProperties: 0
          maxProperties: 20
          description: Additional attributes for a customer.
          example:
            loyalty_id:
              data_type: string
              value: '0123456789'
          additionalProperties:
            type: object
            required:
              - data_type
              - value
            properties:
              data_type:
                type: string
                example: string
                description: Data type of the additional attribute.
                x-oapi-codegen-extra-tags:
                  binding: required
              value:
                type: string
                example: '0123456789'
                description: Data type of the additional attribute.
                x-oapi-codegen-extra-tags:
                  binding: required
        created_at:
          type: string
          format: date-time
          description: Timestamp of the profile creation.
        updated_at:
          type: string
          format: date-time
          description: Timestamp of the latest profile update.
    UpdateProfileRequest:
      description: Update profile request.
      allOf:
        - type: object
          required:
            - last_updated_at
          properties:
            last_updated_at:
              type: string
              format: date-time
              description: >
                The timestamp of the profile's last update.

                This must match the current `updated_at` value; otherwise, the
                update request will be rejected with a 409 Conflict error.

                This check prevents silent data loss by detecting concurrent
                updates.
              x-oapi-codegen-extra-tags:
                binding: required
            email:
              type: string
              format: email
              description: Email of the customer.
        - type: object
          properties:
            full_name:
              type: string
              maximum: 256
              description: >-
                Full name of the customer, including first, middle and last
                name.
              nullable: true
              x-oapi-codegen-extra-tags:
                binding: omitempty,max=256
            phone_number:
              type: string
              description: Phone number of the customer in E.164 format.
              nullable: true
              x-oapi-codegen-extra-tags:
                binding: omitempty,e164WithEmpty
            store_id:
              type: string
              description: The identifier of the store, profile is being created in.
              nullable: true
            created_by:
              type: string
              description: The identifier of the associate creating profile
              nullable: true
            extended_attributes:
              minItems: 0
              maxItems: 20
              allOf:
                - type: object
                - type: object
                  description: Additional attributes for a customer.
                  example:
                    loyalty_id:
                      data_type: string
                      value: '0123456789'
                  additionalProperties:
                    type: object
                    required:
                      - data_type
                      - value
                    properties:
                      data_type:
                        type: string
                        example: string
                        description: Data type of the additional attribute.
                        x-oapi-codegen-extra-tags:
                          binding: required
                      value:
                        type: string
                        example: '0123456789'
                        description: Data type of the additional attribute.
                        x-oapi-codegen-extra-tags:
                          binding: required
    UpdateProfileResponse:
      description: Update profile response.
      type: object
      required:
        - id
        - display_id
        - email
        - full_name
        - phone_number
        - store_id
        - created_by
        - extended_attributes
        - created_at
        - updated_at
      properties:
        id:
          type: string
          example: NS-EU-01FXX4RSTKMVBFPBVZFPGM97ZW-01FXX4S1V1R8M4PF9H1S1D82CX
          description: The profile identifier.
          x-oapi-codegen-extra-tags:
            binding: required
        display_id:
          type: string
          description: The human readable profile identifier.
        email:
          type: string
          description: Email of the customer.
          x-oapi-codegen-extra-tags:
            binding: required
        full_name:
          type: string
          maximum: 256
          description: Full name of the customer, including first, middle and last name.
        phone_number:
          type: string
          description: Phone number of the customer in E.164 format.
        store_id:
          type: string
          description: The identifier of the store, profile is being created in.
        created_by:
          type: string
          description: The identifier of the associate creating profile
        extended_attributes:
          type: object
          minProperties: 0
          maxProperties: 20
          description: Additional attributes for a customer.
          example:
            loyalty_id:
              data_type: string
              value: '0123456789'
          additionalProperties:
            type: object
            required:
              - data_type
              - value
            properties:
              data_type:
                type: string
                example: string
                description: Data type of the additional attribute.
                x-oapi-codegen-extra-tags:
                  binding: required
              value:
                type: string
                example: '0123456789'
                description: Data type of the additional attribute.
                x-oapi-codegen-extra-tags:
                  binding: required
        created_at:
          type: string
          format: date-time
          description: Timestamp of the profile creation.
        updated_at:
          type: string
          format: date-time
          description: Timestamp of the latest profile update.
    AddressResponse:
      type: object
      allOf:
        - properties:
            id:
              type: string
              example: NS-EU-01FXX4THCG41RFCXVEQGKD60Y4-01FXX4TTF7X8CF5JR3B35TD70F
              description: Identifier of the address.
          required:
            - id
            - updated_at
            - created_at
        - description: >-
            Address model request without autogenerated fields like created_at,
            token, id, etc.
          type: object
          required:
            - full_name
            - address_line_1
            - zip_code
            - city
            - country_code
          properties:
            full_name:
              type: string
              description: Full name.
              x-oapi-codegen-extra-tags:
                binding: required
            company_name:
              type: string
              description: Company name.
              nullable: true
            address_line_1:
              type: string
              description: >-
                First line of the address. Typically, the street and house
                number.
              x-oapi-codegen-extra-tags:
                binding: required
            address_line_2:
              type: string
              description: >-
                Second line of the address. Typically, the apartment number or
                PO box
            zip_code:
              type: string
              description: Postal code of the address.
              x-oapi-codegen-extra-tags:
                binding: required
            city:
              type: string
              description: The city/town of the address.
              x-oapi-codegen-extra-tags:
                binding: required
            state:
              type: string
              description: State/province or region of the address.
              nullable: true
            country_code:
              type: string
              description: Country code in ISO 3166-1 alpha-2 format.
              x-oapi-codegen-extra-tags:
                binding: required,iso3166_1_alpha2
            contact_phone:
              type: string
              description: Phone number of the address.
              nullable: true
        - properties:
            created_at:
              type: string
              format: date-time
            updated_at:
              type: string
              format: date-time
    CreateAddressRequest:
      description: Create address request.
      type: object
      required:
        - full_name
        - address_line_1
        - zip_code
        - city
        - country_code
      properties:
        full_name:
          type: string
          description: Full name.
          x-oapi-codegen-extra-tags:
            binding: required
        company_name:
          type: string
          description: Company name.
          nullable: true
        address_line_1:
          type: string
          description: First line of the address. Typically, the street and house number.
          x-oapi-codegen-extra-tags:
            binding: required
        address_line_2:
          type: string
          description: >-
            Second line of the address. Typically, the apartment number or PO
            box
        zip_code:
          type: string
          description: Postal code of the address.
          x-oapi-codegen-extra-tags:
            binding: required
        city:
          type: string
          description: The city/town of the address.
          x-oapi-codegen-extra-tags:
            binding: required
        state:
          type: string
          description: State/province or region of the address.
          nullable: true
        country_code:
          type: string
          description: Country code in ISO 3166-1 alpha-2 format.
          x-oapi-codegen-extra-tags:
            binding: required,iso3166_1_alpha2
        contact_phone:
          type: string
          description: Phone number of the address.
          nullable: true
    AddressModel:
      description: >-
        Address model request without autogenerated fields like created_at,
        token, id, etc.
      type: object
      required:
        - full_name
        - address_line_1
        - zip_code
        - city
        - country_code
      properties:
        full_name:
          type: string
          description: Full name.
          x-oapi-codegen-extra-tags:
            binding: required
        company_name:
          type: string
          description: Company name.
          nullable: true
        address_line_1:
          type: string
          description: First line of the address. Typically, the street and house number.
          x-oapi-codegen-extra-tags:
            binding: required
        address_line_2:
          type: string
          description: >-
            Second line of the address. Typically, the apartment number or PO
            box
        zip_code:
          type: string
          description: Postal code of the address.
          x-oapi-codegen-extra-tags:
            binding: required
        city:
          type: string
          description: The city/town of the address.
          x-oapi-codegen-extra-tags:
            binding: required
        state:
          type: string
          description: State/province or region of the address.
          nullable: true
        country_code:
          type: string
          description: Country code in ISO 3166-1 alpha-2 format.
          x-oapi-codegen-extra-tags:
            binding: required,iso3166_1_alpha2
        contact_phone:
          type: string
          description: Phone number of the address.
          nullable: true
    ExistingAddressResponse:
      description: Existing address response.
      type: object
      allOf:
        - properties:
            id:
              type: string
              example: NS-EU-01FXX4THCG41RFCXVEQGKD60Y4-01FXX4TTF7X8CF5JR3B35TD70F
              description: Identifier of the address.
          required:
            - id
            - updated_at
            - created_at
        - description: >-
            Address model request without autogenerated fields like created_at,
            token, id, etc.
          type: object
          required:
            - full_name
            - address_line_1
            - zip_code
            - city
            - country_code
          properties:
            full_name:
              type: string
              description: Full name.
              x-oapi-codegen-extra-tags:
                binding: required
            company_name:
              type: string
              description: Company name.
              nullable: true
            address_line_1:
              type: string
              description: >-
                First line of the address. Typically, the street and house
                number.
              x-oapi-codegen-extra-tags:
                binding: required
            address_line_2:
              type: string
              description: >-
                Second line of the address. Typically, the apartment number or
                PO box
            zip_code:
              type: string
              description: Postal code of the address.
              x-oapi-codegen-extra-tags:
                binding: required
            city:
              type: string
              description: The city/town of the address.
              x-oapi-codegen-extra-tags:
                binding: required
            state:
              type: string
              description: State/province or region of the address.
              nullable: true
            country_code:
              type: string
              description: Country code in ISO 3166-1 alpha-2 format.
              x-oapi-codegen-extra-tags:
                binding: required,iso3166_1_alpha2
            contact_phone:
              type: string
              description: Phone number of the address.
              nullable: true
        - properties:
            created_at:
              type: string
              format: date-time
            updated_at:
              type: string
              format: date-time
    CreateAddressResponse:
      description: Create address response.
      type: object
      allOf:
        - properties:
            id:
              type: string
              example: NS-EU-01FXX4THCG41RFCXVEQGKD60Y4-01FXX4TTF7X8CF5JR3B35TD70F
              description: Identifier of the address.
          required:
            - id
            - updated_at
            - created_at
        - description: >-
            Address model request without autogenerated fields like created_at,
            token, id, etc.
          type: object
          required:
            - full_name
            - address_line_1
            - zip_code
            - city
            - country_code
          properties:
            full_name:
              type: string
              description: Full name.
              x-oapi-codegen-extra-tags:
                binding: required
            company_name:
              type: string
              description: Company name.
              nullable: true
            address_line_1:
              type: string
              description: >-
                First line of the address. Typically, the street and house
                number.
              x-oapi-codegen-extra-tags:
                binding: required
            address_line_2:
              type: string
              description: >-
                Second line of the address. Typically, the apartment number or
                PO box
            zip_code:
              type: string
              description: Postal code of the address.
              x-oapi-codegen-extra-tags:
                binding: required
            city:
              type: string
              description: The city/town of the address.
              x-oapi-codegen-extra-tags:
                binding: required
            state:
              type: string
              description: State/province or region of the address.
              nullable: true
            country_code:
              type: string
              description: Country code in ISO 3166-1 alpha-2 format.
              x-oapi-codegen-extra-tags:
                binding: required,iso3166_1_alpha2
            contact_phone:
              type: string
              description: Phone number of the address.
              nullable: true
        - properties:
            created_at:
              type: string
              format: date-time
            updated_at:
              type: string
              format: date-time
    PaginationInfo:
      type: object
      required:
        - count
        - total
        - offset
      description: Pagination info.
      properties:
        count:
          type: integer
          format: int64
          description: Amount of items in the current page.
        total:
          type: integer
          format: int64
          description: Total amount of the items for given filters set.
        offset:
          type: integer
          format: int64
          description: Offset of the current page.
    ListAddressesResponse:
      description: List addresses response
      type: object
      required:
        - addresses
        - pagination_info
      properties:
        addresses:
          type: array
          items:
            type: object
            allOf:
              - properties:
                  id:
                    type: string
                    example: >-
                      NS-EU-01FXX4THCG41RFCXVEQGKD60Y4-01FXX4TTF7X8CF5JR3B35TD70F
                    description: Identifier of the address.
                required:
                  - id
                  - updated_at
                  - created_at
              - description: >-
                  Address model request without autogenerated fields like
                  created_at, token, id, etc.
                type: object
                required:
                  - full_name
                  - address_line_1
                  - zip_code
                  - city
                  - country_code
                properties:
                  full_name:
                    type: string
                    description: Full name.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  company_name:
                    type: string
                    description: Company name.
                    nullable: true
                  address_line_1:
                    type: string
                    description: >-
                      First line of the address. Typically, the street and house
                      number.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  address_line_2:
                    type: string
                    description: >-
                      Second line of the address. Typically, the apartment
                      number or PO box
                  zip_code:
                    type: string
                    description: Postal code of the address.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  city:
                    type: string
                    description: The city/town of the address.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  state:
                    type: string
                    description: State/province or region of the address.
                    nullable: true
                  country_code:
                    type: string
                    description: Country code in ISO 3166-1 alpha-2 format.
                    x-oapi-codegen-extra-tags:
                      binding: required,iso3166_1_alpha2
                  contact_phone:
                    type: string
                    description: Phone number of the address.
                    nullable: true
              - properties:
                  created_at:
                    type: string
                    format: date-time
                  updated_at:
                    type: string
                    format: date-time
          x-oapi-codegen-extra-tags:
            binding: required
        pagination_info:
          allOf:
            - type: object
              required:
                - count
                - total
                - offset
              description: Pagination info.
              properties:
                count:
                  type: integer
                  format: int64
                  description: Amount of items in the current page.
                total:
                  type: integer
                  format: int64
                  description: Total amount of the items for given filters set.
                offset:
                  type: integer
                  format: int64
                  description: Offset of the current page.
          x-oapi-codegen-extra-tags:
            binding: required
    GetAddressResponse:
      description: Get address response
      type: object
      allOf:
        - properties:
            id:
              type: string
              example: NS-EU-01FXX4THCG41RFCXVEQGKD60Y4-01FXX4TTF7X8CF5JR3B35TD70F
              description: Identifier of the address.
          required:
            - id
            - updated_at
            - created_at
        - description: >-
            Address model request without autogenerated fields like created_at,
            token, id, etc.
          type: object
          required:
            - full_name
            - address_line_1
            - zip_code
            - city
            - country_code
          properties:
            full_name:
              type: string
              description: Full name.
              x-oapi-codegen-extra-tags:
                binding: required
            company_name:
              type: string
              description: Company name.
              nullable: true
            address_line_1:
              type: string
              description: >-
                First line of the address. Typically, the street and house
                number.
              x-oapi-codegen-extra-tags:
                binding: required
            address_line_2:
              type: string
              description: >-
                Second line of the address. Typically, the apartment number or
                PO box
            zip_code:
              type: string
              description: Postal code of the address.
              x-oapi-codegen-extra-tags:
                binding: required
            city:
              type: string
              description: The city/town of the address.
              x-oapi-codegen-extra-tags:
                binding: required
            state:
              type: string
              description: State/province or region of the address.
              nullable: true
            country_code:
              type: string
              description: Country code in ISO 3166-1 alpha-2 format.
              x-oapi-codegen-extra-tags:
                binding: required,iso3166_1_alpha2
            contact_phone:
              type: string
              description: Phone number of the address.
              nullable: true
        - properties:
            created_at:
              type: string
              format: date-time
            updated_at:
              type: string
              format: date-time
    UpdateAddressModel:
      description: >-
        Address model request without autogenerated fields like created_at,
        token, id, etc.
      type: object
      properties:
        full_name:
          type: string
          description: Full name.
          nullable: true
        company_name:
          type: string
          description: Company name.
          nullable: true
        address_line_1:
          type: string
          description: First line of the address. Typically, the street and house number.
          nullable: true
        address_line_2:
          type: string
          description: >-
            Second line of the address. Typically, the apartment number or PO
            box
          nullable: true
        zip_code:
          type: string
          description: Postal code of the address.
          nullable: true
        city:
          type: string
          description: The city/town of the address.
          nullable: true
        state:
          type: string
          description: State/province or region of the address.
          nullable: true
        country_code:
          type: string
          description: Country code in ISO 3166-1 alpha-2 format.
          nullable: true
        contact_phone:
          type: string
          description: Phone number of the address.
          nullable: true
    UpdateAddressRequest:
      description: Update address request.
      allOf:
        - type: object
          required:
            - last_updated_at
          properties:
            last_updated_at:
              type: string
              format: date-time
              description: >
                The timestamp of the profile's last update.

                This must match the current `updated_at` value; otherwise, the
                update request will be rejected with a 409 Conflict error.

                This check prevents silent data loss by detecting concurrent
                updates.
              x-oapi-codegen-extra-tags:
                binding: required
        - description: >-
            Address model request without autogenerated fields like created_at,
            token, id, etc.
          type: object
          properties:
            full_name:
              type: string
              description: Full name.
              nullable: true
            company_name:
              type: string
              description: Company name.
              nullable: true
            address_line_1:
              type: string
              description: >-
                First line of the address. Typically, the street and house
                number.
              nullable: true
            address_line_2:
              type: string
              description: >-
                Second line of the address. Typically, the apartment number or
                PO box
              nullable: true
            zip_code:
              type: string
              description: Postal code of the address.
              nullable: true
            city:
              type: string
              description: The city/town of the address.
              nullable: true
            state:
              type: string
              description: State/province or region of the address.
              nullable: true
            country_code:
              type: string
              description: Country code in ISO 3166-1 alpha-2 format.
              nullable: true
            contact_phone:
              type: string
              description: Phone number of the address.
              nullable: true
    UpdateAddressResponse:
      description: Update address response.
      type: object
      allOf:
        - properties:
            id:
              type: string
              example: NS-EU-01FXX4THCG41RFCXVEQGKD60Y4-01FXX4TTF7X8CF5JR3B35TD70F
              description: Identifier of the address.
          required:
            - id
            - updated_at
            - created_at
        - description: >-
            Address model request without autogenerated fields like created_at,
            token, id, etc.
          type: object
          required:
            - full_name
            - address_line_1
            - zip_code
            - city
            - country_code
          properties:
            full_name:
              type: string
              description: Full name.
              x-oapi-codegen-extra-tags:
                binding: required
            company_name:
              type: string
              description: Company name.
              nullable: true
            address_line_1:
              type: string
              description: >-
                First line of the address. Typically, the street and house
                number.
              x-oapi-codegen-extra-tags:
                binding: required
            address_line_2:
              type: string
              description: >-
                Second line of the address. Typically, the apartment number or
                PO box
            zip_code:
              type: string
              description: Postal code of the address.
              x-oapi-codegen-extra-tags:
                binding: required
            city:
              type: string
              description: The city/town of the address.
              x-oapi-codegen-extra-tags:
                binding: required
            state:
              type: string
              description: State/province or region of the address.
              nullable: true
            country_code:
              type: string
              description: Country code in ISO 3166-1 alpha-2 format.
              x-oapi-codegen-extra-tags:
                binding: required,iso3166_1_alpha2
            contact_phone:
              type: string
              description: Phone number of the address.
              nullable: true
        - properties:
            created_at:
              type: string
              format: date-time
            updated_at:
              type: string
              format: date-time
    CreateDataRequest:
      type: object
      description: Create data request.
      required:
        - content_type
        - content
      properties:
        content_type:
          type: string
          example: application/pdf
          description: The media type of the content data.
          x-oapi-codegen-extra-tags:
            binding: required
        content:
          type: string
          format: binary
          description: The file content to store.
          x-oapi-codegen-extra-tags:
            binding: required
        ttl:
          type: integer
          format: int64
          example: 30
          description: Time to live in days, will be kept indefinitely if not set.
    DataModel:
      type: object
      description: Free form data entry, one data entry is limited to 1kb.
      required:
        - content_type
        - content
      properties:
        content_type:
          type: string
          example: application/pdf
          description: The media type of the content data.
          x-oapi-codegen-extra-tags:
            binding: required
        content:
          type: string
          format: binary
          description: The file content to store.
          x-oapi-codegen-extra-tags:
            binding: required
        ttl:
          type: integer
          format: int64
          example: 30
          description: Time to live in days, will be kept indefinitely if not set.
    CreateDataResponse:
      type: object
      required:
        - id
      description: Store file response.
      properties:
        id:
          type: string
          example: NS-EU-a5548746-acc1-4d75-81b9-72aec2bfebb7
          description: The ID for retriving the file content.
          pattern: >-
            ^NS-[A-Z]{2}-[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-4[a-fA-F0-9]{3}-[8|9|aA|bB][a-fA-F0-9]{3}-[a-fA-F0-9]{12}$
          x-oapi-codegen-extra-tags:
            binding: required
    TokenizeRequest:
      type: object
      description: Tokenize PII data request.
      required:
        - data
      properties:
        data:
          type: object
          additionalProperties: true
          minProperties: 1
          maxProperties: 25
          example:
            email: john.doe@example.org
            key1: foo
            key2: bar
          description: Sensitive data to be tokenized.
          x-oapi-codegen-extra-tags:
            binding: required
    TokenizeResponse:
      type: object
      description: Tokenize PII data response.
      required:
        - tokens
        - errors
      properties:
        tokens:
          type: object
          additionalProperties: true
          minProperties: 0
          maxProperties: 25
          example:
            email: NS-EU-01FXX5DQ3NP19AKJK7045F5ST2-01FXX5DZFQ9CJQ3D29JPTXXXRX
          description: Tokenized data.
          x-oapi-codegen-extra-tags:
            binding: required
        errors:
          type: object
          minProperties: 0
          maxProperties: 25
          example:
            key1: retryable_error
            key2: internal_error
          description: Keys with error codes.
    DetokenizeRequest:
      type: object
      required:
        - tokens
      description: Detokenize profiles, addresses and data request.
      properties:
        tokens:
          type: object
          minProperties: 1
          maxProperties: 25
          example:
            key1: NS-EU-01FXX4SCM7D4FCFJT8ZKD4JRV7-01FXX4SHNQQK1XDQHTZX6V6608
            key2: NS-EU-01FXX4SPXKPQCEWSZRZS9D7992-01FXX4SWFJKK66QGEEWQ8TRPAM
          description: NewStore platform tokens.
          x-oapi-codegen-extra-tags:
            binding: required
    DetokenizeResponse:
      type: object
      description: Detokenize profiles, addresses and data response.
      required:
        - data
        - errors
      properties:
        data:
          type: object
          minProperties: 0
          maxProperties: 25
          example:
            key1: john.doe@example.org
          description: Keys with detokenized plaintext data.
          x-oapi-codegen-extra-tags:
            binding: required
        errors:
          type: object
          minProperties: 0
          maxProperties: 25
          example:
            key2: token_not_found_error
          description: Keys with error codes.
          x-oapi-codegen-extra-tags:
            binding: required
paths:
  /profiles:
    get:
      tags:
        - customerProfile
      deprecated: true
      operationId: listProfiles
      summary: List customer profiles
      description: >
        Returns a searchable list of consumer profiles.


        Note: This endpoint is designed for paginated front-end use with a
        search function. It is not suitable for exporting a comprehensive list
        of all customers due to the following limitations:

        - Pagination Per Page Limit: Up to 500 profiles can be fetched per page.

        - Total Profiles Limit: There is a maximum limit of 10,000 profiles.

        - API Error Beyond Limit: When trying to paginate beyond 10,000
        profiles, the API will start returning errors.
      responses:
        '200':
          description: The list customer profiles response.
          content:
            application/json:
              schema:
                type: object
                required:
                  - profiles
                  - pagination_info
                description: List profiles response.
                properties:
                  profiles:
                    type: array
                    items:
                      type: object
                      required:
                        - id
                        - display_id
                        - email
                        - full_name
                        - phone_number
                        - store_id
                        - created_by
                        - extended_attributes
                        - created_at
                        - updated_at
                      properties:
                        id:
                          type: string
                          example: >-
                            NS-EU-01FXX4RSTKMVBFPBVZFPGM97ZW-01FXX4S1V1R8M4PF9H1S1D82CX
                          description: The profile identifier.
                          x-oapi-codegen-extra-tags:
                            binding: required
                        display_id:
                          type: string
                          description: The human readable profile identifier.
                        email:
                          type: string
                          description: Email of the customer.
                          x-oapi-codegen-extra-tags:
                            binding: required
                        full_name:
                          type: string
                          maximum: 256
                          description: >-
                            Full name of the customer, including first, middle
                            and last name.
                        phone_number:
                          type: string
                          description: Phone number of the customer in E.164 format.
                        store_id:
                          type: string
                          description: >-
                            The identifier of the store, profile is being
                            created in.
                        created_by:
                          type: string
                          description: The identifier of the associate creating profile
                        extended_attributes:
                          type: object
                          minProperties: 0
                          maxProperties: 20
                          description: Additional attributes for a customer.
                          example:
                            loyalty_id:
                              data_type: string
                              value: '0123456789'
                          additionalProperties:
                            type: object
                            required:
                              - data_type
                              - value
                            properties:
                              data_type:
                                type: string
                                example: string
                                description: Data type of the additional attribute.
                                x-oapi-codegen-extra-tags:
                                  binding: required
                              value:
                                type: string
                                example: '0123456789'
                                description: Data type of the additional attribute.
                                x-oapi-codegen-extra-tags:
                                  binding: required
                        created_at:
                          type: string
                          format: date-time
                          description: Timestamp of the profile creation.
                        updated_at:
                          type: string
                          format: date-time
                          description: Timestamp of the latest profile update.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  pagination_info:
                    x-oapi-codegen-extra-tags:
                      binding: required
                    allOf:
                      - type: object
                        required:
                          - count
                          - total
                          - offset
                        description: Pagination info.
                        properties:
                          count:
                            type: integer
                            format: int64
                            description: Amount of items in the current page.
                          total:
                            type: integer
                            format: int64
                            description: Total amount of the items for given filters set.
                          offset:
                            type: integer
                            format: int64
                            description: Offset of the current page.
        '400':
          description: Bad Request.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '500':
          description: Internal server error.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '502':
          description: Bad gateway.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
      parameters:
        - name: q
          in: query
          description: >
            The search term to filter customers. The term is compared to the

            values in the `email`, `fullname` and `phonenumber` fields. A
            partial match is also

            considered a match.
          schema:
            type: string
        - name: sort
          in: query
          description: |
            The sort to be applied to customers response.
          schema:
            type: string
        - name: offset
          in: query
          description: The customer profiles page offset.
          schema:
            default: 0
            minimum: 0
            type: integer
            format: int64
        - name: count
          in: query
          description: The number of requested customer profiles.
          schema:
            default: 10
            minimum: 1
            maximum: 500
            type: integer
            format: int64
    post:
      tags:
        - customerProfile
      deprecated: true
      operationId: createOrShowProfile
      summary: Get or create customer profile
      description: >
        Retrieves an existing customer profile or creates a new customer profile
        in case it has not been created yet.
      requestBody:
        content:
          application/json:
            schema:
              allOf:
                - type: object
                  description: Create profile request.
                  required:
                    - email
                  properties:
                    email:
                      type: string
                      format: email
                      description: Email of the customer.
                      x-oapi-codegen-extra-tags:
                        binding: required
                - type: object
                  properties:
                    full_name:
                      type: string
                      maximum: 256
                      description: >-
                        Full name of the customer, including first, middle and
                        last name.
                      nullable: true
                      x-oapi-codegen-extra-tags:
                        binding: omitempty,max=256
                    phone_number:
                      type: string
                      description: Phone number of the customer in E.164 format.
                      nullable: true
                      x-oapi-codegen-extra-tags:
                        binding: omitempty,e164WithEmpty
                    store_id:
                      type: string
                      description: >-
                        The identifier of the store, profile is being created
                        in.
                      nullable: true
                    created_by:
                      type: string
                      description: The identifier of the associate creating profile
                      nullable: true
                    extended_attributes:
                      minItems: 0
                      maxItems: 20
                      allOf:
                        - type: object
                        - type: object
                          description: Additional attributes for a customer.
                          example:
                            loyalty_id:
                              data_type: string
                              value: '0123456789'
                          additionalProperties:
                            type: object
                            required:
                              - data_type
                              - value
                            properties:
                              data_type:
                                type: string
                                example: string
                                description: Data type of the additional attribute.
                                x-oapi-codegen-extra-tags:
                                  binding: required
                              value:
                                type: string
                                example: '0123456789'
                                description: Data type of the additional attribute.
                                x-oapi-codegen-extra-tags:
                                  binding: required
        required: true
      responses:
        '200':
          description: A customer profile with the same email already exists response.
          content:
            application/json:
              schema:
                description: Get profile response.
                type: object
                required:
                  - id
                  - display_id
                  - email
                  - full_name
                  - phone_number
                  - store_id
                  - created_by
                  - extended_attributes
                  - created_at
                  - updated_at
                properties:
                  id:
                    type: string
                    example: >-
                      NS-EU-01FXX4RSTKMVBFPBVZFPGM97ZW-01FXX4S1V1R8M4PF9H1S1D82CX
                    description: The profile identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  display_id:
                    type: string
                    description: The human readable profile identifier.
                  email:
                    type: string
                    description: Email of the customer.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  full_name:
                    type: string
                    maximum: 256
                    description: >-
                      Full name of the customer, including first, middle and
                      last name.
                  phone_number:
                    type: string
                    description: Phone number of the customer in E.164 format.
                  store_id:
                    type: string
                    description: The identifier of the store, profile is being created in.
                  created_by:
                    type: string
                    description: The identifier of the associate creating profile
                  extended_attributes:
                    type: object
                    minProperties: 0
                    maxProperties: 20
                    description: Additional attributes for a customer.
                    example:
                      loyalty_id:
                        data_type: string
                        value: '0123456789'
                    additionalProperties:
                      type: object
                      required:
                        - data_type
                        - value
                      properties:
                        data_type:
                          type: string
                          example: string
                          description: Data type of the additional attribute.
                          x-oapi-codegen-extra-tags:
                            binding: required
                        value:
                          type: string
                          example: '0123456789'
                          description: Data type of the additional attribute.
                          x-oapi-codegen-extra-tags:
                            binding: required
                  created_at:
                    type: string
                    format: date-time
                    description: Timestamp of the profile creation.
                  updated_at:
                    type: string
                    format: date-time
                    description: Timestamp of the latest profile update.
        '201':
          description: The create customer profile response.
          content:
            application/json:
              schema:
                description: Create profile response.
                type: object
                required:
                  - id
                  - display_id
                  - email
                  - full_name
                  - phone_number
                  - store_id
                  - created_by
                  - extended_attributes
                  - created_at
                  - updated_at
                properties:
                  id:
                    type: string
                    example: >-
                      NS-EU-01FXX4RSTKMVBFPBVZFPGM97ZW-01FXX4S1V1R8M4PF9H1S1D82CX
                    description: The profile identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  display_id:
                    type: string
                    description: The human readable profile identifier.
                  email:
                    type: string
                    description: Email of the customer.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  full_name:
                    type: string
                    maximum: 256
                    description: >-
                      Full name of the customer, including first, middle and
                      last name.
                  phone_number:
                    type: string
                    description: Phone number of the customer in E.164 format.
                  store_id:
                    type: string
                    description: The identifier of the store, profile is being created in.
                  created_by:
                    type: string
                    description: The identifier of the associate creating profile
                  extended_attributes:
                    type: object
                    minProperties: 0
                    maxProperties: 20
                    description: Additional attributes for a customer.
                    example:
                      loyalty_id:
                        data_type: string
                        value: '0123456789'
                    additionalProperties:
                      type: object
                      required:
                        - data_type
                        - value
                      properties:
                        data_type:
                          type: string
                          example: string
                          description: Data type of the additional attribute.
                          x-oapi-codegen-extra-tags:
                            binding: required
                        value:
                          type: string
                          example: '0123456789'
                          description: Data type of the additional attribute.
                          x-oapi-codegen-extra-tags:
                            binding: required
                  created_at:
                    type: string
                    format: date-time
                    description: Timestamp of the profile creation.
                  updated_at:
                    type: string
                    format: date-time
                    description: Timestamp of the latest profile update.
        '400':
          description: Bad Request.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '409':
          description: Conflict.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '422':
          description: Unable to process the entity.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '500':
          description: Internal server error.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '502':
          description: Bad gateway.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
  /profiles/{profile_id}:
    get:
      tags:
        - customerProfile
      deprecated: true
      operationId: showProfile
      summary: Get customer profile
      description: |
        Returns a single customer profile for the given customer `profile_id`.
      parameters:
        - name: profile_id
          in: path
          description: Profile ID
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The customer profile response.
          content:
            application/json:
              schema:
                description: Get profile response.
                type: object
                required:
                  - id
                  - display_id
                  - email
                  - full_name
                  - phone_number
                  - store_id
                  - created_by
                  - extended_attributes
                  - created_at
                  - updated_at
                properties:
                  id:
                    type: string
                    example: >-
                      NS-EU-01FXX4RSTKMVBFPBVZFPGM97ZW-01FXX4S1V1R8M4PF9H1S1D82CX
                    description: The profile identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  display_id:
                    type: string
                    description: The human readable profile identifier.
                  email:
                    type: string
                    description: Email of the customer.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  full_name:
                    type: string
                    maximum: 256
                    description: >-
                      Full name of the customer, including first, middle and
                      last name.
                  phone_number:
                    type: string
                    description: Phone number of the customer in E.164 format.
                  store_id:
                    type: string
                    description: The identifier of the store, profile is being created in.
                  created_by:
                    type: string
                    description: The identifier of the associate creating profile
                  extended_attributes:
                    type: object
                    minProperties: 0
                    maxProperties: 20
                    description: Additional attributes for a customer.
                    example:
                      loyalty_id:
                        data_type: string
                        value: '0123456789'
                    additionalProperties:
                      type: object
                      required:
                        - data_type
                        - value
                      properties:
                        data_type:
                          type: string
                          example: string
                          description: Data type of the additional attribute.
                          x-oapi-codegen-extra-tags:
                            binding: required
                        value:
                          type: string
                          example: '0123456789'
                          description: Data type of the additional attribute.
                          x-oapi-codegen-extra-tags:
                            binding: required
                  created_at:
                    type: string
                    format: date-time
                    description: Timestamp of the profile creation.
                  updated_at:
                    type: string
                    format: date-time
                    description: Timestamp of the latest profile update.
        '400':
          description: Bad Request.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '404':
          description: Not Found.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '500':
          description: Internal server error.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '502':
          description: Bad gateway.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
    patch:
      tags:
        - customerProfile
      deprecated: true
      operationId: updateProfile
      summary: Update customer profile
      description: |
        Updates an existing customer profile for the given `profile_id`.
      parameters:
        - name: profile_id
          in: path
          description: Profile ID
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              description: Update profile request.
              allOf:
                - type: object
                  required:
                    - last_updated_at
                  properties:
                    last_updated_at:
                      type: string
                      format: date-time
                      description: >
                        The timestamp of the profile's last update.

                        This must match the current `updated_at` value;
                        otherwise, the update request will be rejected with a
                        409 Conflict error.

                        This check prevents silent data loss by detecting
                        concurrent updates.
                      x-oapi-codegen-extra-tags:
                        binding: required
                    email:
                      type: string
                      format: email
                      description: Email of the customer.
                - type: object
                  properties:
                    full_name:
                      type: string
                      maximum: 256
                      description: >-
                        Full name of the customer, including first, middle and
                        last name.
                      nullable: true
                      x-oapi-codegen-extra-tags:
                        binding: omitempty,max=256
                    phone_number:
                      type: string
                      description: Phone number of the customer in E.164 format.
                      nullable: true
                      x-oapi-codegen-extra-tags:
                        binding: omitempty,e164WithEmpty
                    store_id:
                      type: string
                      description: >-
                        The identifier of the store, profile is being created
                        in.
                      nullable: true
                    created_by:
                      type: string
                      description: The identifier of the associate creating profile
                      nullable: true
                    extended_attributes:
                      minItems: 0
                      maxItems: 20
                      allOf:
                        - type: object
                        - type: object
                          description: Additional attributes for a customer.
                          example:
                            loyalty_id:
                              data_type: string
                              value: '0123456789'
                          additionalProperties:
                            type: object
                            required:
                              - data_type
                              - value
                            properties:
                              data_type:
                                type: string
                                example: string
                                description: Data type of the additional attribute.
                                x-oapi-codegen-extra-tags:
                                  binding: required
                              value:
                                type: string
                                example: '0123456789'
                                description: Data type of the additional attribute.
                                x-oapi-codegen-extra-tags:
                                  binding: required
        required: true
      responses:
        '200':
          description: The update customer profile response.
          content:
            application/json:
              schema:
                description: Update profile response.
                type: object
                required:
                  - id
                  - display_id
                  - email
                  - full_name
                  - phone_number
                  - store_id
                  - created_by
                  - extended_attributes
                  - created_at
                  - updated_at
                properties:
                  id:
                    type: string
                    example: >-
                      NS-EU-01FXX4RSTKMVBFPBVZFPGM97ZW-01FXX4S1V1R8M4PF9H1S1D82CX
                    description: The profile identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  display_id:
                    type: string
                    description: The human readable profile identifier.
                  email:
                    type: string
                    description: Email of the customer.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  full_name:
                    type: string
                    maximum: 256
                    description: >-
                      Full name of the customer, including first, middle and
                      last name.
                  phone_number:
                    type: string
                    description: Phone number of the customer in E.164 format.
                  store_id:
                    type: string
                    description: The identifier of the store, profile is being created in.
                  created_by:
                    type: string
                    description: The identifier of the associate creating profile
                  extended_attributes:
                    type: object
                    minProperties: 0
                    maxProperties: 20
                    description: Additional attributes for a customer.
                    example:
                      loyalty_id:
                        data_type: string
                        value: '0123456789'
                    additionalProperties:
                      type: object
                      required:
                        - data_type
                        - value
                      properties:
                        data_type:
                          type: string
                          example: string
                          description: Data type of the additional attribute.
                          x-oapi-codegen-extra-tags:
                            binding: required
                        value:
                          type: string
                          example: '0123456789'
                          description: Data type of the additional attribute.
                          x-oapi-codegen-extra-tags:
                            binding: required
                  created_at:
                    type: string
                    format: date-time
                    description: Timestamp of the profile creation.
                  updated_at:
                    type: string
                    format: date-time
                    description: Timestamp of the latest profile update.
        '404':
          description: Profile not found.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '409':
          description: >
            Profile update conflict.

            The provided `last_updated_at` value does not match the profile's
            current `updated_at` value.

            This indicates that the profile was modified by another process in
            the meantime.

            This check helps detect concurrent updates and prevents silent data
            loss.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '422':
          description: Unable to process the entity.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '500':
          description: Internal server error.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '502':
          description: Bad gateway.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
  /profiles/{profile_id}/delete:
    post:
      tags:
        - customerProfile
      deprecated: true
      operationId: requestProfileDeletion
      summary: Request customer profile deletion
      description: Creates request for customer profile deletion.
      parameters:
        - name: profile_id
          in: path
          description: Profile ID
          required: true
          schema:
            type: string
      responses:
        '202':
          description: Deletion request accepted.
        '400':
          description: Bad Request.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '404':
          description: Profile not found.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '409':
          description: Deletion already requested.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '500':
          description: Internal server error.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '502':
          description: Bad gateway.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
  /profiles/{profile_id}/addresses:
    post:
      tags:
        - address
      deprecated: true
      operationId: createOrShowAddress
      summary: Get or create address
      description: >
        Retrieves an existing address or creates a new address in case it has
        not been added yet.
      parameters:
        - name: profile_id
          in: path
          description: Profile ID
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              description: Create address request.
              type: object
              required:
                - full_name
                - address_line_1
                - zip_code
                - city
                - country_code
              properties:
                full_name:
                  type: string
                  description: Full name.
                  x-oapi-codegen-extra-tags:
                    binding: required
                company_name:
                  type: string
                  description: Company name.
                  nullable: true
                address_line_1:
                  type: string
                  description: >-
                    First line of the address. Typically, the street and house
                    number.
                  x-oapi-codegen-extra-tags:
                    binding: required
                address_line_2:
                  type: string
                  description: >-
                    Second line of the address. Typically, the apartment number
                    or PO box
                zip_code:
                  type: string
                  description: Postal code of the address.
                  x-oapi-codegen-extra-tags:
                    binding: required
                city:
                  type: string
                  description: The city/town of the address.
                  x-oapi-codegen-extra-tags:
                    binding: required
                state:
                  type: string
                  description: State/province or region of the address.
                  nullable: true
                country_code:
                  type: string
                  description: Country code in ISO 3166-1 alpha-2 format.
                  x-oapi-codegen-extra-tags:
                    binding: required,iso3166_1_alpha2
                contact_phone:
                  type: string
                  description: Phone number of the address.
                  nullable: true
        required: true
      responses:
        '200':
          description: Existing address response.
          content:
            application/json:
              schema:
                description: Existing address response.
                type: object
                allOf:
                  - properties:
                      id:
                        type: string
                        example: >-
                          NS-EU-01FXX4THCG41RFCXVEQGKD60Y4-01FXX4TTF7X8CF5JR3B35TD70F
                        description: Identifier of the address.
                    required:
                      - id
                      - updated_at
                      - created_at
                  - description: >-
                      Address model request without autogenerated fields like
                      created_at, token, id, etc.
                    type: object
                    required:
                      - full_name
                      - address_line_1
                      - zip_code
                      - city
                      - country_code
                    properties:
                      full_name:
                        type: string
                        description: Full name.
                        x-oapi-codegen-extra-tags:
                          binding: required
                      company_name:
                        type: string
                        description: Company name.
                        nullable: true
                      address_line_1:
                        type: string
                        description: >-
                          First line of the address. Typically, the street and
                          house number.
                        x-oapi-codegen-extra-tags:
                          binding: required
                      address_line_2:
                        type: string
                        description: >-
                          Second line of the address. Typically, the apartment
                          number or PO box
                      zip_code:
                        type: string
                        description: Postal code of the address.
                        x-oapi-codegen-extra-tags:
                          binding: required
                      city:
                        type: string
                        description: The city/town of the address.
                        x-oapi-codegen-extra-tags:
                          binding: required
                      state:
                        type: string
                        description: State/province or region of the address.
                        nullable: true
                      country_code:
                        type: string
                        description: Country code in ISO 3166-1 alpha-2 format.
                        x-oapi-codegen-extra-tags:
                          binding: required,iso3166_1_alpha2
                      contact_phone:
                        type: string
                        description: Phone number of the address.
                        nullable: true
                  - properties:
                      created_at:
                        type: string
                        format: date-time
                      updated_at:
                        type: string
                        format: date-time
        '201':
          description: The create addresses response.
          content:
            application/json:
              schema:
                description: Create address response.
                type: object
                allOf:
                  - properties:
                      id:
                        type: string
                        example: >-
                          NS-EU-01FXX4THCG41RFCXVEQGKD60Y4-01FXX4TTF7X8CF5JR3B35TD70F
                        description: Identifier of the address.
                    required:
                      - id
                      - updated_at
                      - created_at
                  - description: >-
                      Address model request without autogenerated fields like
                      created_at, token, id, etc.
                    type: object
                    required:
                      - full_name
                      - address_line_1
                      - zip_code
                      - city
                      - country_code
                    properties:
                      full_name:
                        type: string
                        description: Full name.
                        x-oapi-codegen-extra-tags:
                          binding: required
                      company_name:
                        type: string
                        description: Company name.
                        nullable: true
                      address_line_1:
                        type: string
                        description: >-
                          First line of the address. Typically, the street and
                          house number.
                        x-oapi-codegen-extra-tags:
                          binding: required
                      address_line_2:
                        type: string
                        description: >-
                          Second line of the address. Typically, the apartment
                          number or PO box
                      zip_code:
                        type: string
                        description: Postal code of the address.
                        x-oapi-codegen-extra-tags:
                          binding: required
                      city:
                        type: string
                        description: The city/town of the address.
                        x-oapi-codegen-extra-tags:
                          binding: required
                      state:
                        type: string
                        description: State/province or region of the address.
                        nullable: true
                      country_code:
                        type: string
                        description: Country code in ISO 3166-1 alpha-2 format.
                        x-oapi-codegen-extra-tags:
                          binding: required,iso3166_1_alpha2
                      contact_phone:
                        type: string
                        description: Phone number of the address.
                        nullable: true
                  - properties:
                      created_at:
                        type: string
                        format: date-time
                      updated_at:
                        type: string
                        format: date-time
        '400':
          description: Bad Request.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '404':
          description: Profile not found.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '422':
          description: Unable to process the entity.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '500':
          description: Internal server error.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '502':
          description: Bad gateway.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
    get:
      tags:
        - address
      deprecated: true
      operationId: listAddresses
      summary: List addresses for profile id
      description: Returns a list of addresses for given customer `profile_id`.
      parameters:
        - name: profile_id
          in: path
          description: Profile ID
          required: true
          schema:
            type: string
        - name: offset
          in: query
          description: The addresses page offset.
          schema:
            default: 0
            minimum: 0
            type: integer
            format: int64
        - name: count
          in: query
          description: The number of requested addresses.
          schema:
            default: 10
            minimum: 1
            maximum: 1000
            type: integer
            format: int64
      responses:
        '200':
          description: The addresses list.
          content:
            application/json:
              schema:
                description: List addresses response
                type: object
                required:
                  - addresses
                  - pagination_info
                properties:
                  addresses:
                    type: array
                    items:
                      type: object
                      allOf:
                        - properties:
                            id:
                              type: string
                              example: >-
                                NS-EU-01FXX4THCG41RFCXVEQGKD60Y4-01FXX4TTF7X8CF5JR3B35TD70F
                              description: Identifier of the address.
                          required:
                            - id
                            - updated_at
                            - created_at
                        - description: >-
                            Address model request without autogenerated fields
                            like created_at, token, id, etc.
                          type: object
                          required:
                            - full_name
                            - address_line_1
                            - zip_code
                            - city
                            - country_code
                          properties:
                            full_name:
                              type: string
                              description: Full name.
                              x-oapi-codegen-extra-tags:
                                binding: required
                            company_name:
                              type: string
                              description: Company name.
                              nullable: true
                            address_line_1:
                              type: string
                              description: >-
                                First line of the address. Typically, the street
                                and house number.
                              x-oapi-codegen-extra-tags:
                                binding: required
                            address_line_2:
                              type: string
                              description: >-
                                Second line of the address. Typically, the
                                apartment number or PO box
                            zip_code:
                              type: string
                              description: Postal code of the address.
                              x-oapi-codegen-extra-tags:
                                binding: required
                            city:
                              type: string
                              description: The city/town of the address.
                              x-oapi-codegen-extra-tags:
                                binding: required
                            state:
                              type: string
                              description: State/province or region of the address.
                              nullable: true
                            country_code:
                              type: string
                              description: Country code in ISO 3166-1 alpha-2 format.
                              x-oapi-codegen-extra-tags:
                                binding: required,iso3166_1_alpha2
                            contact_phone:
                              type: string
                              description: Phone number of the address.
                              nullable: true
                        - properties:
                            created_at:
                              type: string
                              format: date-time
                            updated_at:
                              type: string
                              format: date-time
                    x-oapi-codegen-extra-tags:
                      binding: required
                  pagination_info:
                    allOf:
                      - type: object
                        required:
                          - count
                          - total
                          - offset
                        description: Pagination info.
                        properties:
                          count:
                            type: integer
                            format: int64
                            description: Amount of items in the current page.
                          total:
                            type: integer
                            format: int64
                            description: Total amount of the items for given filters set.
                          offset:
                            type: integer
                            format: int64
                            description: Offset of the current page.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '404':
          description: Profile not found.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '500':
          description: Internal server error.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '502':
          description: Bad gateway.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
  /profiles/{profile_id}/addresses/{address_id}:
    get:
      tags:
        - address
      deprecated: true
      operationId: showAddress
      summary: Get address for profile id and address id
      description: Returns an address for the given customer `profile_id` and `address_id`.
      parameters:
        - name: profile_id
          in: path
          description: Profile ID
          required: true
          schema:
            type: string
        - name: address_id
          in: path
          description: Address ID
          required: true
          schema:
            type: string
      responses:
        '200':
          description: The address.
          content:
            application/json:
              schema:
                description: Get address response
                type: object
                allOf:
                  - properties:
                      id:
                        type: string
                        example: >-
                          NS-EU-01FXX4THCG41RFCXVEQGKD60Y4-01FXX4TTF7X8CF5JR3B35TD70F
                        description: Identifier of the address.
                    required:
                      - id
                      - updated_at
                      - created_at
                  - description: >-
                      Address model request without autogenerated fields like
                      created_at, token, id, etc.
                    type: object
                    required:
                      - full_name
                      - address_line_1
                      - zip_code
                      - city
                      - country_code
                    properties:
                      full_name:
                        type: string
                        description: Full name.
                        x-oapi-codegen-extra-tags:
                          binding: required
                      company_name:
                        type: string
                        description: Company name.
                        nullable: true
                      address_line_1:
                        type: string
                        description: >-
                          First line of the address. Typically, the street and
                          house number.
                        x-oapi-codegen-extra-tags:
                          binding: required
                      address_line_2:
                        type: string
                        description: >-
                          Second line of the address. Typically, the apartment
                          number or PO box
                      zip_code:
                        type: string
                        description: Postal code of the address.
                        x-oapi-codegen-extra-tags:
                          binding: required
                      city:
                        type: string
                        description: The city/town of the address.
                        x-oapi-codegen-extra-tags:
                          binding: required
                      state:
                        type: string
                        description: State/province or region of the address.
                        nullable: true
                      country_code:
                        type: string
                        description: Country code in ISO 3166-1 alpha-2 format.
                        x-oapi-codegen-extra-tags:
                          binding: required,iso3166_1_alpha2
                      contact_phone:
                        type: string
                        description: Phone number of the address.
                        nullable: true
                  - properties:
                      created_at:
                        type: string
                        format: date-time
                      updated_at:
                        type: string
                        format: date-time
        '400':
          description: Bad Request.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '404':
          description: Profile or address not found.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '500':
          description: Internal server error.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '502':
          description: Bad gateway.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
    patch:
      tags:
        - address
      deprecated: true
      operationId: updateAddress
      summary: Update address
      description: Updates address for the given customer `profile_id` and `address_id`.
      parameters:
        - name: profile_id
          in: path
          description: Profile ID
          required: true
          schema:
            type: string
        - name: address_id
          in: path
          description: Address ID
          required: true
          schema:
            type: string
      requestBody:
        content:
          application/json:
            schema:
              description: Update address request.
              allOf:
                - type: object
                  required:
                    - last_updated_at
                  properties:
                    last_updated_at:
                      type: string
                      format: date-time
                      description: >
                        The timestamp of the profile's last update.

                        This must match the current `updated_at` value;
                        otherwise, the update request will be rejected with a
                        409 Conflict error.

                        This check prevents silent data loss by detecting
                        concurrent updates.
                      x-oapi-codegen-extra-tags:
                        binding: required
                - description: >-
                    Address model request without autogenerated fields like
                    created_at, token, id, etc.
                  type: object
                  properties:
                    full_name:
                      type: string
                      description: Full name.
                      nullable: true
                    company_name:
                      type: string
                      description: Company name.
                      nullable: true
                    address_line_1:
                      type: string
                      description: >-
                        First line of the address. Typically, the street and
                        house number.
                      nullable: true
                    address_line_2:
                      type: string
                      description: >-
                        Second line of the address. Typically, the apartment
                        number or PO box
                      nullable: true
                    zip_code:
                      type: string
                      description: Postal code of the address.
                      nullable: true
                    city:
                      type: string
                      description: The city/town of the address.
                      nullable: true
                    state:
                      type: string
                      description: State/province or region of the address.
                      nullable: true
                    country_code:
                      type: string
                      description: Country code in ISO 3166-1 alpha-2 format.
                      nullable: true
                    contact_phone:
                      type: string
                      description: Phone number of the address.
                      nullable: true
        required: true
      responses:
        '200':
          description: The update address response.
          content:
            application/json:
              schema:
                description: Update address response.
                type: object
                allOf:
                  - properties:
                      id:
                        type: string
                        example: >-
                          NS-EU-01FXX4THCG41RFCXVEQGKD60Y4-01FXX4TTF7X8CF5JR3B35TD70F
                        description: Identifier of the address.
                    required:
                      - id
                      - updated_at
                      - created_at
                  - description: >-
                      Address model request without autogenerated fields like
                      created_at, token, id, etc.
                    type: object
                    required:
                      - full_name
                      - address_line_1
                      - zip_code
                      - city
                      - country_code
                    properties:
                      full_name:
                        type: string
                        description: Full name.
                        x-oapi-codegen-extra-tags:
                          binding: required
                      company_name:
                        type: string
                        description: Company name.
                        nullable: true
                      address_line_1:
                        type: string
                        description: >-
                          First line of the address. Typically, the street and
                          house number.
                        x-oapi-codegen-extra-tags:
                          binding: required
                      address_line_2:
                        type: string
                        description: >-
                          Second line of the address. Typically, the apartment
                          number or PO box
                      zip_code:
                        type: string
                        description: Postal code of the address.
                        x-oapi-codegen-extra-tags:
                          binding: required
                      city:
                        type: string
                        description: The city/town of the address.
                        x-oapi-codegen-extra-tags:
                          binding: required
                      state:
                        type: string
                        description: State/province or region of the address.
                        nullable: true
                      country_code:
                        type: string
                        description: Country code in ISO 3166-1 alpha-2 format.
                        x-oapi-codegen-extra-tags:
                          binding: required,iso3166_1_alpha2
                      contact_phone:
                        type: string
                        description: Phone number of the address.
                        nullable: true
                  - properties:
                      created_at:
                        type: string
                        format: date-time
                      updated_at:
                        type: string
                        format: date-time
        '404':
          description: Profile or address not found.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '409':
          description: Update conflict.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '422':
          description: Unable to process the entity.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '500':
          description: Internal server error.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '502':
          description: Bad gateway.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
    delete:
      tags:
        - address
      deprecated: true
      operationId: destroyAddress
      summary: Delete address
      description: |
        Deletes address from the latest customer profile.
      parameters:
        - name: profile_id
          in: path
          description: Profile ID
          required: true
          schema:
            type: string
        - name: address_id
          in: path
          description: Address ID
          required: true
          schema:
            type: string
      responses:
        '204':
          description: The delete address response.
        '400':
          description: Address deletion bad request.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '404':
          description: Profile or address not found.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '409':
          description: Address deletion conflict.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '500':
          description: Internal server error.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '502':
          description: Bad gateway.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
  /data:
    post:
      tags:
        - data
      deprecated: true
      operationId: createData
      summary: Store a new PII data entry in a residency compliant way
      description: |
        Stores a new PII data entry in a residency compliant way.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              description: Create data request.
              required:
                - content_type
                - content
              properties:
                content_type:
                  type: string
                  example: application/pdf
                  description: The media type of the content data.
                  x-oapi-codegen-extra-tags:
                    binding: required
                content:
                  type: string
                  format: binary
                  description: The file content to store.
                  x-oapi-codegen-extra-tags:
                    binding: required
                ttl:
                  type: integer
                  format: int64
                  example: 30
                  description: Time to live in days, will be kept indefinitely if not set.
        required: true
      responses:
        '201':
          description: The create data response.
          content:
            application/json:
              schema:
                type: object
                required:
                  - id
                description: Store file response.
                properties:
                  id:
                    type: string
                    example: NS-EU-a5548746-acc1-4d75-81b9-72aec2bfebb7
                    description: The ID for retriving the file content.
                    pattern: >-
                      ^NS-[A-Z]{2}-[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-4[a-fA-F0-9]{3}-[8|9|aA|bB][a-fA-F0-9]{3}-[a-fA-F0-9]{12}$
                    x-oapi-codegen-extra-tags:
                      binding: required
        '400':
          description: Bad Request.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '500':
          description: Internal server error.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
  /data/{data_id}:
    get:
      tags:
        - data
      deprecated: true
      operationId: showData
      summary: Get data entry for the provided data ID
      description: >-
        Returns data for the given `data_id`, depending on the defined
        content-type.
      parameters:
        - name: data_id
          in: path
          description: Data ID
          required: true
          example: NS-EU-a5548746-acc1-4d75-81b9-72aec2bfebb7
          schema:
            type: string
            pattern: >-
              ^NS-[A-Z]{2}-[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-4[a-fA-F0-9]{3}-[8|9|aA|bB][a-fA-F0-9]{3}-[a-fA-F0-9]{12}$
      responses:
        '200':
          description: The data entry. The content-type depends on the data entry.
        '400':
          description: Bad Request.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '404':
          description: The data was not found.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '500':
          description: Internal server error.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
    delete:
      tags:
        - data
      deprecated: true
      operationId: destroyData
      summary: Delete data
      description: |
        Deletes data entry for the given `data_id`.
      parameters:
        - name: data_id
          in: path
          description: Data ID
          example: NS-EU-a5548746-acc1-4d75-81b9-72aec2bfebb7
          required: true
          schema:
            type: string
            pattern: >-
              ^NS-[A-Z]{2}-[a-fA-F0-9]{8}-[a-fA-F0-9]{4}-4[a-fA-F0-9]{3}-[8|9|aA|bB][a-fA-F0-9]{3}-[a-fA-F0-9]{12}$
      responses:
        '204':
          description: The delete data entry response.
        '400':
          description: Bad Request.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '404':
          description: Data entry not found.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '500':
          description: Bad request
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
  /tokenize:
    post:
      tags:
        - tokenOperations
      deprecated: true
      operationId: tokenize
      summary: Tokenize PII data
      description: >-
        Tokenizes PII data that is not related to a profile, tokens are only
        valid for 30 days.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              description: Tokenize PII data request.
              required:
                - data
              properties:
                data:
                  type: object
                  additionalProperties: true
                  minProperties: 1
                  maxProperties: 25
                  example:
                    email: john.doe@example.org
                    key1: foo
                    key2: bar
                  description: Sensitive data to be tokenized.
                  x-oapi-codegen-extra-tags:
                    binding: required
        required: true
      responses:
        '200':
          description: The list of tokenized PII data.
          content:
            application/json:
              schema:
                type: object
                description: Tokenize PII data response.
                required:
                  - tokens
                  - errors
                properties:
                  tokens:
                    type: object
                    additionalProperties: true
                    minProperties: 0
                    maxProperties: 25
                    example:
                      email: >-
                        NS-EU-01FXX5DQ3NP19AKJK7045F5ST2-01FXX5DZFQ9CJQ3D29JPTXXXRX
                    description: Tokenized data.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  errors:
                    type: object
                    minProperties: 0
                    maxProperties: 25
                    example:
                      key1: retryable_error
                      key2: internal_error
                    description: Keys with error codes.
        '400':
          description: Bad request.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '500':
          description: Internal Server Error.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
  /detokenize:
    post:
      tags:
        - tokenOperations
      deprecated: true
      operationId: detokenize
      summary: Detokenize multiple tokens
      description: Detokenizes a list of tokens for profiles, addresses, or data entries.
      requestBody:
        content:
          application/json:
            schema:
              type: object
              required:
                - tokens
              description: Detokenize profiles, addresses and data request.
              properties:
                tokens:
                  type: object
                  minProperties: 1
                  maxProperties: 25
                  example:
                    key1: >-
                      NS-EU-01FXX4SCM7D4FCFJT8ZKD4JRV7-01FXX4SHNQQK1XDQHTZX6V6608
                    key2: >-
                      NS-EU-01FXX4SPXKPQCEWSZRZS9D7992-01FXX4SWFJKK66QGEEWQ8TRPAM
                  description: NewStore platform tokens.
                  x-oapi-codegen-extra-tags:
                    binding: required
        required: true
      responses:
        '200':
          description: The list of detokenized PII data.
          content:
            application/json:
              schema:
                type: object
                description: Detokenize profiles, addresses and data response.
                required:
                  - data
                  - errors
                properties:
                  data:
                    type: object
                    minProperties: 0
                    maxProperties: 25
                    example:
                      key1: john.doe@example.org
                    description: Keys with detokenized plaintext data.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  errors:
                    type: object
                    minProperties: 0
                    maxProperties: 25
                    example:
                      key2: token_not_found_error
                    description: Keys with error codes.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '400':
          description: Bad Request.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
        '500':
          description: Internal server error.
          content:
            application/problem+json:
              schema:
                type: object
                description: Model for error response.
                required:
                  - request_id
                  - message
                  - type
                  - title
                properties:
                  request_id:
                    type: string
                    example: some-request-id
                    description: The request identifier.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  message:
                    type: string
                    description: The error message.
                    example: An error happened.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  type:
                    type: string
                    default: about:blank
                    format: uri
                    description: >-
                      A URI reference [RFC3986] that identifies the problem
                      type.
                    x-oapi-codegen-extra-tags:
                      binding: required
                  title:
                    type: string
                    description: A short, human-readable summary of the problem type.
                    x-oapi-codegen-extra-tags:
                      binding: required
