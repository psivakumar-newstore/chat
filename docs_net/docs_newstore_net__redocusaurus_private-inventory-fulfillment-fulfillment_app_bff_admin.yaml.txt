openapi: 3.0.0
info:
  title: Fulfillment App API
  description: Implements endpoints used by the app.
  version: '0.1'
  contact:
    name: Team Inventory
    url: https://apidocs.newstore.io
  license:
    name: NewStore
    url: https://apidocs.newstore.io
servers:
  - url: https://dodici.x.newstore.net/v0/d
tags:
  - name: Store fulfillment requests
    description: >
      Use this resource to manage orders that are currently in the process of
      being fulfilled by a store or are in

      transit from or to a store.
paths:
  /fulfillment_associate:
    get:
      tags:
        - Store fulfillment requests
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                title: Get current FulfillmentAssociate
                type: object
                properties:
                  associate:
                    $ref: '#/components/schemas/associate'
                required:
                  - associate
        '404':
          description: The associate was not found.
        '500':
          description: An internal error occurred.
      description: >-
        Returns the associate object associated with the token sent with the
        header.
      operationId: getAssociate
      summary: Get associate
    put:
      tags:
        - Store fulfillment requests
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                title: Get current FulfillmentAssociate
                type: object
                properties:
                  associate:
                    $ref: '#/components/schemas/associate'
                required:
                  - associate
        '404':
          description: The associate was not found.
        '500':
          description: An internal error occurred.
      description: Updates the associate object.
      summary: Update associate
      operationId: updateAssociate
      requestBody:
        content:
          application/json:
            schema:
              description: Response schema for getting all FulfillmentLogisticOrders
              title: Get all FulfillmentLogisticOrders
              type: object
              properties:
                status:
                  enum:
                    - can_receive_requests
                    - cannot_receive_requests
                    - not_available
                  type: string
              required:
                - status
        required: true
  /fulfillment_logistic_orders/{uuid}/initiate_return:
    post:
      tags:
        - Store fulfillment requests
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                description: Response schema for the FulfillmentLogisticOrder action
                title: >-
                  Response for initiating a return for items in
                  FulfillmentLogisticOrder
                type: object
                properties:
                  return_uuid:
                    description: uuid of the return process
                    maxLength: 36
                    minLength: 36
                    type: string
                required:
                  - return_uuid
        '404':
          description: The sales order was not found.
        '422':
          description: The provided request body is not valid.
        '500':
          description: An internal error occurred.
      description: Initiates the return process for the specified items.
      summary: Initiate return
      operationId: initiateReturn
      requestBody:
        content:
          application/json:
            schema:
              description: >-
                Request schema for initiate_return FulfillmentLogisticOrder
                action
              title: >-
                Request for initiating a return for items in
                FulfillmentLogisticOrder
              type: object
              properties:
                returned_order_items:
                  description: A list of objects, containing returned items
                  minItems: 1
                  type: array
                  items:
                    $ref: '#/components/schemas/returnedItem'
                sales_order_uuid:
                  maxLength: 36
                  minLength: 36
                  type: string
                store_id:
                  description: The store where the return is initiated from.
                  type: string
              required:
                - returned_order_items
                - sales_order_uuid
        required: true
    parameters:
      - name: uuid
        in: path
        required: true
        schema:
          type: string
        description: The identifier of the fulfillment logistic order.
  /products/{id}:
    get:
      tags:
        - Store fulfillment requests
      responses:
        '200':
          description: |
            The product with the given id exists.
          content:
            application/json:
              schema:
                description: >-
                  Detailed information about a single product including
                  information about variation properties of products of the same
                  group
                title: Product detail information
                type: object
        '404':
          description: The product was not found.
        '500':
          description: An internal error occurred.
      description: |
        Returns the product with the given ID.
      summary: Get product
      operationId: getProduct
      parameters:
        - name: locale
          in: query
          description: >-
            A locale code. Can be used to fetch product information in different
            languages.
          schema:
            type: string
        - name: catalog
          in: query
          description: >-
            DEPRECATED. Use `shop` instead. The identifier of the product
            catalog.
          schema:
            type: string
        - name: shop
          in: query
          description: The identifier of the shop the product belongs to.
          schema:
            type: string
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
        description: The identifier of the product.
  /setup_data:
    get:
      tags:
        - Store fulfillment requests
      responses:
        '200':
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/SetupData'
        '404':
          description: The associate or store was not found.
        '500':
          description: An internal error occurred.
      description: >-
        Retrieves a dictionary with all the necessary data to set up the
        NewStore app.
      operationId: getData
      summary: Get data
      parameters:
        - name: locale
          in: query
          description: >-
            A locale code. Can be used to fetch product information in different
            languages.
          schema:
            type: string
  /test_notifications:
    post:
      tags:
        - Store fulfillment requests
      responses:
        '202':
          description: The request was accepted and the notification should be sent.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: object
                    properties:
                      message:
                        type: string
                      status_identifier:
                        type: string
                    required:
                      - status_identifier
                      - message
                required:
                  - status
        '400':
          description: Bad request
        '500':
          description: An internal error occurred.
      description: >-
        Sends a test notification to the user. Use this method to verify the
        notification setup.
      summary: Sends test notification.
      operationId: sendTestNotification
      requestBody:
        content:
          application/json:
            schema:
              description: Send a test notification to the user
              type: object
              properties:
                message:
                  description: >-
                    The message that will be sent in the notification, a default
                    message is used if none is provided.
                  type: string
                notification_type:
                  minLength: 1
                  type: string
              required:
                - notification_type
        required: true
  /unassigned_fulfillment_request_count:
    get:
      tags:
        - Store fulfillment requests
      summary: Unassigned fufillment requests.
      responses:
        '200':
          description: OK
          content:
            '*/*':
              schema:
                description: >-
                  Response scheme with the count of store fulfillment queue
                  unassigned requests, based on priority
                title: The count of store fulfillment queue unassigned requests
                type: object
        '204':
          description: No content available.
        '400':
          description: Bad request
        '500':
          description: An internal error occurred.
      description: >-
        Gets the count of unassigned fulfillment requests, based on the
        priority.
      operationId: getUnassignedCount
components:
  schemas:
    SetupData:
      description: Setup data for mobile application response
      title: Setup data for mobile application response
      type: object
      properties:
        adjustment_configuration:
          description: Configures the adjustment feature of the Fulfillment App.
          type: object
          properties:
            manual_adjustment_enabled:
              description: >-
                Determines whether the user can manually change the quantity of
                items in the adjustment.
              default: true
              type: boolean
          required:
            - manual_adjustment_enabled
        asn_configuration:
          description: ASN-related configurations.
          type: object
          properties:
            allow_asn_overreceiving:
              description: >-
                If it is true, allow to receive more items than specified in
                ASN.
              type: boolean
          required:
            - allow_asn_overreceiving
        associate:
          $ref: '#/components/schemas/associate'
        channels:
          type: array
          items:
            type: object
            properties:
              name:
                description: The channel used to send notifications via our provider.
                minLength: 1
                type: string
              type:
                description: >-
                  Determines the notification channel type. Possible values are:
                  `push`, `message`.
                minLength: 1
                type: string
            required:
              - name
              - type
        cycle_count_configuration:
          description: Tenant specific configuration for cycle count functionality.
          type: object
          properties:
            count_modification_enabled:
              description: Determines whether the cycle count manual adjustment is enabled.
              type: boolean
            stock_on_hand_visible:
              description: Determines whether the stock on hand should be shown.
              type: boolean
            additional_identifier_display:
              description: Determines whether to display additional product identifier.
              type: string
              nullable: true
          required:
            - stock_on_hand_visible
            - count_modification_enabled
        feature_toggle:
          $ref: '#/components/schemas/featureToggle'
        inventory_receiving_configuration:
          description: Tenant specific configuration for inventory-related functionality.
          type: object
          properties:
            blind_receiving_enabled:
              description: >-
                Determines whether receiving inventory into the store without an
                ASN is permitted.
              type: boolean
            manual_receiving_enabled:
              description: Determines whether the user can manually adjust item quantity.
              type: boolean
            order_ref:
              description: Order reference field configurations.
              type: object
              properties:
                enabled:
                  description: Determines if `Order Reference` field is visible or not.
                  type: boolean
                label:
                  description: '`Order Reference` field label.'
                  type: string
              required:
                - enabled
                - label
            shipment_ref:
              description: Shipment reference field configurations.
              type: object
              properties:
                enabled:
                  description: Determines if `Shipment Reference` field is visible or not.
                  type: boolean
                label:
                  description: '`Shipment Reference` field label.'
                  type: string
              required:
                - enabled
                - label
          required:
            - manual_receiving_enabled
            - blind_receiving_enabled
            - shipment_ref
            - order_ref
        notification_channels:
          description: DEPRECATED. Use the 'channels' property instead.
          type: array
          items:
            type: string
        order_item_external_identifier_settings:
          description: Encapsulated settings of external identifiers usage
          type: object
          properties:
            display_identifiers:
              description: >-
                A list of identifiers, ordered by priority in which they should
                be shown in the NewStore App
              type: array
              items:
                type: string
            scan_identifier:
              description: The identifier which should be scanned in the NewStore App.
              type: string
          required:
            - display_identifiers
            - scan_identifier
        return_process_configuration:
          description: Return process specific configuration used by the NewStore App
          type: object
          properties:
            blind_return_enabled:
              description: The flag to enable/disable blind returns.
              type: boolean
            quality_inspection_options:
              description: >-
                A list of quality inspection options and codes used during the
                return process.
              type: array
              items:
                type: object
                properties:
                  code:
                    description: The code associated with this option.
                    type: integer
                  option:
                    description: The displayed option as string.
                    type: string
                required:
                  - code
                  - option
            return_reasons:
              description: A list of reasons and codes used during the return process.
              type: array
              items:
                type: object
                properties:
                  code:
                    description: The code associated with this reason.
                    type: integer
                  reason:
                    description: 'The displayed reason as string.  '
                    type: string
                  reasons:
                    description: >-
                      Multi-language dictionary of reason messages. Map key
                      should follow ISO 639-1 and values will be the translated
                      message.
                    minLength: 1
                    type: object
                required:
                  - code
                  - reason
                  - reasons
          required:
            - return_reasons
        scanning_configuration:
          description: Tenant specific configuration for scanning component
          type: object
          properties:
            barcode_types:
              description: >-
                A list of barcode types that can be scanned by app, like [qr,
                databar, ...]
              type: array
              items:
                description: The type of barcode that we support to scan in the app
                enum:
                  - qr
                  - databar
                  - dataMatrix
                  - databarExpanded
                  - ean8
                  - ean13
                  - code128
                  - interleaved2of5
                  - pdf417
                  - code93
                  - code39
                  - upce
                  - upca
                type: string
          required:
            - barcode_types
        store:
          $ref: '#/components/schemas/store'
        store_fulfillment_queue_visibility_enabled:
          description: True if the store fulfillment queue visibility is configured
          type: boolean
        tenant_configuration:
          description: Tenant specific configuration used by the NewStore App
          type: object
          properties:
            PubNub:
              description: PubNub configuration keys
              type: object
              properties:
                authentication_key:
                  type: string
                publish_key:
                  type: string
                subscribe_key:
                  type: string
              required:
                - publish_key
                - subscribe_key
                - authentication_key
          required:
            - PubNub
        transfers_configuration:
          description: Tenant configuration for transfer transactions.
          type: object
          properties:
            manual_adjustment_enabled:
              description: >-
                Determines whether the user can manually adjust the transferred
                quantities.
              default: true
              type: boolean
          required:
            - manual_adjustment_enabled
        use_document_printer_for_return_label:
          description: >-
            A value to determine whether to use document printer when printing
            return label in retail app
          type: boolean
        permissions:
          description: >-
            The list of fulfillment app related permissions assigned to this
            user
          type: array
          items:
            type: string
            enum:
              - login_fa
              - view_store_inventory
              - view_cycle_counts
              - view_adjustments
      required:
        - notification_channels
        - channels
        - associate
        - store
        - store_fulfillment_queue_visibility_enabled
        - tenant_configuration
        - scanning_configuration
        - use_document_printer_for_return_label
        - inventory_receiving_configuration
        - cycle_count_configuration
        - transfers_configuration
        - adjustment_configuration
        - asn_configuration
        - feature_toggle
    address:
      title: Shared address schema
      type: object
      properties:
        address_line_1:
          type: string
        address_line_2:
          type: string
        city:
          type: string
        country_code:
          $ref: '#/components/schemas/countryCode'
        first_name:
          type: string
        last_name:
          type: string
        phone:
          type: string
        province:
          type: string
        salutation:
          description: e.g. Mr., Ms., Mrs., ...
          type: string
        second_name:
          type: string
        state:
          type: string
        suffix:
          description: e.g. Jr., Sr., III, ...
          type: string
        title:
          description: e.g. Dr., Prof., Pres., ...
          type: string
        zip_code:
          type: string
      required:
        - address_line_1
        - address_line_2
        - city
        - country_code
        - first_name
        - last_name
        - phone
        - province
        - salutation
        - second_name
        - state
        - suffix
        - title
        - zip_code
    associate:
      type: object
      properties:
        absent_since:
          type: string
          format: date-time
        completed_tasks_count:
          type: integer
        created_at:
          description: The time when this row was created.
          type: string
          format: date-time
        email:
          maxLength: 100
          minLength: 1
          type: string
        first_name:
          maxLength: 256
          minLength: 1
          type: string
        id:
          description: The referencing user id from our SSO service
          maxLength: 256
          minLength: 1
          type: string
        image_url:
          type: string
        is_available:
          description: Describes whether the associate can get an order request or not.
          type: boolean
        last_name:
          maxLength: 256
          minLength: 1
          type: string
        open_tasks_count:
          type: integer
        revision:
          description: >-
            Revision of the row. Starts with 1 and is incremented on each
            update.
          minimum: 1
          type: integer
        status:
          enum:
            - can_receive_requests
            - cannot_receive_requests
            - not_available
          type: string
        store_id:
          maxLength: 256
          minLength: 1
          type: string
        telephone_number:
          maxLength: 32
          type: string
        tenant:
          maxLength: 256
          minLength: 1
          type: string
        updated_at:
          description: The time when this row was last updated.
          type: string
          format: date-time
      required:
        - id
        - first_name
        - last_name
        - email
        - store_id
        - status
        - telephone_number
        - open_tasks_count
        - completed_tasks_count
        - is_available
    businessHour:
      description: Represents store business hours information
      type: object
      properties:
        earliest_pick_up:
          pattern: ^\d{2}:\d{2}$
          type: string
        from_time:
          pattern: ^\d{2}:\d{2}$
          type: string
        latest_pick_up:
          pattern: ^\d{2}:\d{2}$
          type: string
        store_id:
          nullable: true
          type: string
          maxLength: 256
          minLength: 1
        to_time:
          pattern: ^\d{2}:\d{2}$
          type: string
        uuid:
          maxLength: 36
          minLength: 36
          type: string
        weekday:
          description: Value represents week day starting from Monday
          maximum: 6
          minimum: 0
          type: integer
      required:
        - from_time
        - to_time
        - weekday
    countryCode:
      description: >-
        Shipping origin country code. Must be
ISO-3166 reference
enum:
        - AD
        - AE
        - AF
        - AG
        - AI
        - AL
        - AM
        - AO
        - AQ
        - AR
        - AS
        - AT
        - AU
        - AW
        - AX
        - AZ
        - BA
        - BB
        - BD
        - BE
        - BF
        - BG
        - BH
        - BI
        - BJ
        - BL
        - BM
        - BN
        - BO
        - BQ
        - BR
        - BS
        - BT
        - BV
        - BW
        - BY
        - BZ
        - CA
        - CC
        - CD
        - CF
        - CG
        - CH
        - CI
        - CK
        - CL
        - CM
        - CN
        - CO
        - CR
        - CU
        - CV
        - CW
        - CX
        - CY
        - CZ
        - DE
        - DJ
        - DK
        - DM
        - DO
        - DZ
        - EC
        - EE
        - EG
        - EH
        - ER
        - ES
        - ET
        - FI
        - FJ
        - FK
        - FM
        - FO
        - FR
        - GA
        - GB
        - GD
        - GE
        - GF
        - GG
        - GH
        - GI
        - GL
        - GM
        - GN
        - GP
        - GQ
        - GR
        - GS
        - GT
        - GU
        - GW
        - GY
        - HK
        - HM
        - HN
        - HR
        - HT
        - HU
        - ID
        - IE
        - IL
        - IM
        - IN
        - IO
        - IQ
        - IR
        - IS
        - IT
        - JE
        - JM
        - JO
        - JP
        - KE
        - KG
        - KH
        - KI
        - KM
        - KN
        - KP
        - KR
        - KW
        - KY
        - KZ
        - LA
        - LB
        - LC
        - LI
        - LK
        - LR
        - LS
        - LT
        - LU
        - LV
        - LY
        - MA
        - MC
        - MD
        - ME
        - MF
        - MG
        - MH
        - MK
        - ML
        - MM
        - MN
        - MO
        - MP
        - MQ
        - MR
        - MS
        - MT
        - MU
        - MV
        - MW
        - MX
        - MY
        - MZ
        - NA
        - NC
        - NE
        - NF
        - NG
        - NI
        - NL
        - 'NO'
        - NP
        - NR
        - NU
        - NZ
        - OM
        - PA
        - PE
        - PF
        - PG
        - PH
        - PK
        - PL
        - PM
        - PN
        - PR
        - PS
        - PT
        - PW
        - PY
        - QA
        - RE
        - RO
        - RS
        - RU
        - RW
        - SA
        - SB
        - SC
        - SD
        - SE
        - SG
        - SH
        - SI
        - SJ
        - SK
        - SL
        - SM
        - SN
        - SO
        - SR
        - SS
        - ST
        - SV
        - SX
        - SY
        - SZ
        - TC
        - TD
        - TF
        - TG
        - TH
        - TJ
        - TK
        - TL
        - TM
        - TN
        - TO
        - TR
        - TT
        - TV
        - TW
        - TZ
        - UA
        - UG
        - UM
        - US
        - UY
        - UZ
        - VA
        - VC
        - VE
        - VG
        - VI
        - VN
        - VU
        - WF
        - WS
        - YE
        - YT
        - ZA
        - ZM
        - ZW
      type: string
    featureToggle:
      description: Contains features activated/deactivated in the Fulfillment App.
      type: object
      properties:
        cycle_counting_enabled:
          type: boolean
        in_store_checkout_discount:
          type: boolean
        inventory_adjustments_enabled:
          type: boolean
        inventory_receiving_enabled:
          type: boolean
        packages_new_labeling_flow:
          type: boolean
        return_process_enabled:
          type: boolean
        transfers_enabled:
          type: boolean
      required:
        - cycle_counting_enabled
        - in_store_checkout_discount
        - inventory_adjustments_enabled
        - inventory_receiving_enabled
        - packages_new_labeling_flow
        - return_process_enabled
        - transfers_enabled
    printer:
      type: object
      additionalProperties: false
      allOf:
        - $ref: '#/components/schemas/printerData'
        - properties:
            created_at:
              description: The time when this printer was created.
              type: string
              format: date-time
            revision:
              description: >-
                Revision of the printer. Starts with 1 and is incremented on
                each update.
              type: integer
            tenant:
              maxLength: 256
              type: string
            updated_at:
              description: The time when this printer was last updated.
              type: string
              format: date-time
            uuid:
              maxLength: 36
              minLength: 36
              type: string
          type: object
    printerData:
      type: object
      additionalProperties: false
      properties:
        ipv4:
          type: string
          format: ipv4
          maxLength: 16
        ipv6:
          type: string
          format: ipv6
          maxLength: 40
        location:
          maxLength: 100
          type: string
        mac_address:
          maxLength: 32
          minLength: 17
          type: string
        manufacturer:
          enum:
            - Virtual
            - Star
            - AirPrint
          type: string
        model:
          maxLength: 64
          minLength: 3
          type: string
        name:
          maxLength: 64
          minLength: 3
          type: string
        paper_size:
          nullable: true
          type: string
          maxLength: 32
        printer_location_id:
          type: string
          maxLength: 36
          minLength: 36
        store_id:
          maxLength: 256
          minLength: 1
          type: string
        type:
          enum:
            - document_printer
            - label_printer
          type: string
        url:
          maxLength: 256
          type: string
      required:
        - type
        - store_id
        - manufacturer
        - name
    returnedItem:
      type: object
      properties:
        order_item_uuid:
          maxLength: 36
          minLength: 36
          type: string
        quality_inspection_code:
          description: The code of the quality inspection option
          type: integer
        quality_inspection_option:
          description: >-
            The option chosen by the associate indicating the quality of the
            returned product
          type: string
        return_code:
          description: The code of the return reason
          type: integer
        return_reason:
          description: The reason why the item was returned.
          type: string
        sales_order_item_uuid:
          maxLength: 36
          minLength: 36
          type: string
      required:
        - order_item_uuid
        - return_reason
        - return_code
    shippingMethods:
      type: array
      items:
        enum:
          - traditional_carrier
          - same_day_delivery
          - in_store_pick_up
          - in_store_handover
        type: string
    store:
      type: object
      properties:
        active_status:
          type: boolean
        business_hours:
          type: array
          items:
            $ref: '#/components/schemas/businessHour'
        catalog:
          description: >-
            The name of the catalog containing the list of products that can be
            sold at this store.
          nullable: true
          type: string
          maxLength: 256
        completed_tasks_count:
          type: integer
        created_at:
          format: date-time
          type: string
        gift_wrapping:
          type: boolean
        image_url:
          type: string
        label:
          maxLength: 256
          type: string
        locale:
          description: >-
            The locale of the catalog assigned to the store. The product data in
            the catalog is displayed based on the locale specified here.
          nullable: true
          type: string
          maxLength: 32
        manager_id:
          maxLength: 32
          type: string
        open_tasks_count:
          type: integer
        physical_address:
          $ref: '#/components/schemas/address'
        printers:
          type: array
          items:
            $ref: '#/components/schemas/printer'
        queue_prioritization:
          description: >-
            Prioritize the orders in the order queue for this store. Higher
            numbers have priority over lower. Shipping types with equal priority
            are served first come, first serve. Also, all shippign types not
            listed have equal low priority. If empty, the following default
            applies: [{"priority": 3, "shipping_type": "in_store_pickup"},
            {"priority": 2, "shipping_type": "same_day_delivery"}, {"priority":
            1, "shipping_type": "traditional_carrier"}]
          type: array
          items:
            type: object
            properties:
              display_priority_type:
                description: >-
                  Determines how an unassigned order is displayed in the
                  frontend to give associate an overview, how many orders are
                  left in the queue.
                enum:
                  - priority
                  - normal
                type: string
              priority:
                description: >-
                  Priority assigned to this shipping type. Higher numbers have
                  priority over lower. Equal priorities are served first come,
                  first serve.
                maximum: 1000
                minimum: 1
                type: integer
              shipping_type:
                description: >-
                  The type of shipping: 'traditional_carrier' is a delivery next
                  day or more days, 'same_day_delivery' is a delivery on the
                  same day in a given timeslot, i.e. between 2 PM and 4 PM,
                  `in_store_pick_up` is the consumer picking up in a prticular
                  store.
                enum:
                  - traditional_carrier
                  - same_day_delivery
                  - in_store_pick_up
                  - DHL_PAKET
                type: string
            required:
              - priority
              - shipping_type
        shipping_address:
          $ref: '#/components/schemas/address'
        store_id:
          maxLength: 256
          minLength: 1
          type: string
        supported_shipping_methods:
          $ref: '#/components/schemas/shippingMethods'
        tenant:
          maxLength: 256
          type: string
        timezone:
          maxLength: 256
          type: string
        updated_at:
          format: date-time
          type: string
      required:
        - label
        - tenant
        - store_id
  responses: {}
  examples: {}
  requestBodies: {}
  headers: {}
  securitySchemes: {}
  links: {}
  callbacks: {}