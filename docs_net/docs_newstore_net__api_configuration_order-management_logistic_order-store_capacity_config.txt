Capacity-based Routing | NewStore Documentation
Skip to main content
ðŸš€ User docs have moved
to a new docs experience platform!
.
This site will now host ONLY the API docs
.
API Explorer
Search
API Explorer
Integration APIs
Configuration APIs
Inventory and fulfillment
Fulfillment requests
Order management
Availability Config API
Capacity-based Routing
API to get, create and update NOM configurations
Order Injection configuration
Order status notifications API
Configuration API for the refund request service
API to manage sales order configurations
Shipment notification configuration API
Checkout
Payment
NOM and app
Fiscalization and taxes
Promotions
Webhooks
New Generation APIs
patch
Patch store capacity
get
Get store capacity
post
Post store capacity
get
Get remaining store capacity
API docs by Redocly
Capacity-based Routing
(
v0
)
Download OpenAPI specification
:
Download
Use these APIs to control the amount of routing based on the capacity of each distribution center. They are configuration sets
to limit items to be picked, redirecting them to be shipped from another warehouse.
Important
: This capacity configuration comes into effect only for the default routing strategy.
Patch store capacity
Patching store capacity configuration is based on
RFC 6902 - Json Patch
specification.
Hours will be the time range (UTC) it can be processed.
null
value means that the day does not contain a time range at a given week day.
The configuration format is as follows:
{
"DC1"
:
{
"limit"
:
10
,
"hours"
:
{
"monday"
:
[
8
,
18
]
,
"tuesday"
:
[
10
,
13
]
,
"wednesday"
:
[
7
,
14
]
,
"thursday"
:
null
,
"friday"
:
null
,
"saturday"
:
null
,
"sunday"
:
[
12
,
0
]
}
}
,
"DC2"
:
{
...
}
}
If you wan to add a patch operation to saturday, you can do it with the following payload:
[
{
"op"
:
"replace"
,
"path"
:
"/DC1/hours/saturday"
,
"value"
:
[
10
,
12
]
}
,
{
"op"
:
"replace"
,
"path"
:
"
/
DC1
/
hours
/
sunday
,
"value"
:
[
10
,
20
]
}
]
Authorizations:
newStoreAccessToken
header
Parameters
If-Match
required
string
This value is an etag to the version it should update. The value of the hash is returned as ETag header can be retrieved by running a GET /store_capacity.
Request Body schema:
application/json
Array
([ 1 .. 100 ] items)
op
required
string
Enum
:
"add"
"remove"
"replace"
"copy"
"move"
"test"
Operation to be applied. More details about operations are described on
https://jsonpatch.com/
path
required
string
Path on configuration to be applied
value
null or string or object or array or boolean or integer or number
According to Json Patch documentation, value may be optional, depending on the operation
from
string
This property is required for
copy
and
move
operations
Responses
200
Successfully returning store capacity configuration object.
400
Malformed patch object
412
Precondition Failed
422
Unprocessable entity
500
An internal error occurred.
patch
/store_capacity
/v0
/store_capacity
Request samples
Payload
Content type
application/json
Copy
Expand all
Collapse all
[
{
"op"
:
"add"
,
"path"
:
"/DC1"
,
"value"
:
{
"limit"
:
40
,
"hours"
:
{
"monday"
:
[
8
,
22
]
,
"tuesday"
:
[
8
,
22
]
,
"wednesday"
:
[
8
,
22
]
,
"thursday"
:
[
8
,
22
]
,
"friday"
:
[
8
,
23
]
,
"saturday"
:
[
8
,
23
]
,
"sunday"
:
null
}
}
}
,
{
"op"
:
"replace"
,
"path"
:
"/DC1/limit"
,
"value"
:
20
}
]
Response samples
200
400
412
422
500
Content type
application/json
Copy
Expand all
Collapse all
{
"error"
:
null
,
"config"
:
{
"DC01"
:
{
"limit"
:
25
,
"hours"
:
{
"monday"
:
[
8
,
20
]
,
"tuesday"
:
[
8
,
20
]
,
"wednesday"
:
[
8
,
20
]
,
"thursday"
:
[
8
,
20
]
,
"friday"
:
[
8
,
20
]
,
"saturday"
:
null
,
"sunday"
:
null
}
}
}
}
Get store capacity
Description
Authorizations:
newStoreAccessToken
Responses
200
The configuration was found and it will return the raw configuration for store capacity
404
The configuration was not found
500
The configuration was not found
get
/store_capacity
/v0
/store_capacity
Response samples
200
404
500
Content type
application/json
Copy
Expand all
Collapse all
{
"config"
:
{
"store-1"
:
{
"limit"
:
10
,
"hours"
:
{
"monday"
:
[
10
,
12
]
,
"tuesday"
:
[
10
]
,
"wednesday"
:
[
12
,
11
]
,
"thursday"
:
[
8
,
23
]
,
"friday"
:
null
,
"saturday"
:
null
,
"sunday"
:
null
}
}
,
"store-2"
:
{
"limit"
:
50
,
"hours"
:
{
"monday"
:
[
9
,
21
]
,
"tuesday"
:
[
10
]
,
"wednesday"
:
[
12
,
11
]
,
"thursday"
:
[
8
,
23
]
,
"friday"
:
[
7
,
18
]
,
"saturday"
:
[
8
,
20
]
,
"sunday"
:
[
9
,
19
]
}
}
}
,
"error"
:
null
,
"hash"
:
"202cb962ac59075b964b07152d234b70"
}
Post store capacity
The request for this endpoint looks as follows:
{
"policy"
:
{
"some-node"
:
{
"limit"
:
123
,
"hours"
:
{
"monday"
:
null
}
}
}
}
Authorizations:
newStoreAccessToken
header
Parameters
If-Match
string
This value is an etag to the version it should update. The value of the hash is returned as ETag header can be retrieved by running a GET /store_capacity. In case you want to add a new policy leave this empty.
Request Body schema:
application/json
policy
required
object
The whole body of the store capacity config that will replace the old version.
hash
string
In case you want to override the/an old policy, add the hash parameter
Responses
200
Successfully returning store capacity configuration object.
400
Malformed patch object
404
Precondition Failed
500
An internal error occurred.
post
/store_capacity
/v0
/store_capacity
Request samples
Payload
Content type
application/json
Copy
Expand all
Collapse all
{
"policy"
:
{
"boston_1"
:
{
"limit"
:
1337
,
"hours"
:
{
"monday"
:
[
1
,
4
]
,
"tuesday"
:
[
6
]
,
"wednesday"
:
[
6
,
2
]
}
}
}
}
Response samples
200
400
404
500
Content type
application/json
Copy
Expand all
Collapse all
{
"error"
:
null
,
"config"
:
{
"DC01"
:
{
"limit"
:
25
,
"hours"
:
{
"monday"
:
[
8
,
20
]
,
"tuesday"
:
[
8
,
20
]
,
"wednesday"
:
[
8
,
20
]
,
"thursday"
:
[
8
,
20
]
,
"friday"
:
[
8
,
20
]
,
"saturday"
:
null
,
"sunday"
:
null
}
}
}
,
"hash"
:
"202cb962ac59075b964b07152d234b70"
}
Get remaining store capacity
The remaining capacity will be calculated based on the configuration and the routed order items. 
The computation will return the remaining capacity for the full day's operating hours. A star (*) 
wildcard may be provided as a query string to retrieve the remaining capacity for all fulfillment nodes.
Authorizations:
newStoreAccessToken
query
Parameters
locations
string
Locations may be the fulfillment node name like
ff-id-1
or using a star to define everything starting with
ff
like
ff*
or even
*ff
or
*ff*
or even
*
. The values are separated by comma.
date_time
string
This query string is for investigation purpose. You can specify a datetime from an specification as in ISO 8601. The timezone considered will be UTC
Responses
200
The store capacity availability was retrieved successfully
400
Remaining capacity-based did not fit the request requirements
500
Internal server error
get
/store_capacity/remaining
/v0
/store_capacity/remaining
Response samples
200
400
500
Content type
application/json
Copy
Expand all
Collapse all
{
"capacity"
:
{
"DC1"
:
1
,
"DC2"
:
20
,
"DC3"
:
22
}
,
"error"
:
null
}
Previous
Availability Config API
Next
API to get, create and update NOM configurations
Copyright Â© 2025 NewStore, Inc.