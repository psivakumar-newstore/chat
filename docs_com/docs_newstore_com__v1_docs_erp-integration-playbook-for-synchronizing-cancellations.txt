ERP integration playbook for synchronizing cancellations
NewStore Introduction
NewStore basics
Business process models
Hardware and software
Glossary
Mobile POS
Get to know your mPOS
Set up your mPOS
Set up omnichannel services
Engage your customers
Use your mPOS
Manage your mPOS
OMS
Get to know your OMS
Set up your OMS
Expand your OMS
Dashboards and analytics
Shopping App
Get to know your Shopping App
Customize your Shopping App
Developer Resources
Managing data in NewStore
Data reconciliation and completeness playbook
Get started with NewStore APIs
Event consumption and handling
Build custom integrations
API Reference
Omnichannel Manager tools
Platform onboarding guide
End-User Guides
Associate App User Guide
Omnichannel Manager User Guide
Search or ask anything
EXPLORE ARTICLES
ERP integration playbook for synchronizing cancellations
Updated on
Dec 30, 2024
Published on Oct 1, 2024
2 minute(s) read
Listen
Export PDF
Print
Prev
Next
NewStore allows you to create financial transactions in an ERP system and sync them with the NewStore platform for all order cancellations.
This integration playbook helps you integrate an ERP system used in your business with the NewStore platform, to sync all order cancellations. The integration is achieved via the
Event Stream
.
For each order placed in the NewStore platform that is canceled, a credit-memo transaction is created in the ERP, which includes:
Canceled items with prices and taxes
Payment and invoice details of the original order
Process overview
The following sequence diagram represents a typical integration of canceled orders in the NewStore platform with an ERP:
In this playbook:
NewStore sends the
order.items_cancelled
event when order cancelation has been completed.
The integration fetches all necessary details via
graphql
. Payments are processed asynchronously, therefore it may take some time until all payment details are available.
The integration requests for the details of the original sales order by calling the
NetSuite Web Services
.
The integration requests for the details of the invoice of the original sales order by calling the
NetSuite Web Services
.
The integration creates the credit memo transaction in the ERP by calling the ERP's API.
Exceptions
ERP unavailable
The integration returns a 500 error, and the
Event stream
retries sending the macro event.
Payment details unavailable
In some cases, it takes more than a few seconds until payment processing at the
PSP
has been completed and the payment details become available in the platform. The integration moves the event into an internal queue (for example, SQS) for to reprocess later, and returns
200
.
Sample GraphQL Query
Here is an example
GraphQL
query to retrieve all the information required to create a credit memo transaction in the ERP.
query MyQuery {
  order(id: "012345Ab-CdEf-GhIj-KlMn-OpQrStUvWxYz", tenant: "dodici") {
    externalId
    placedAt
    demandLocationId
    currency
    isExchange
    isHistorical
    channel
    channelType
    shippingTax
    shippingTotal
    taxExempt
    taxStrategy
    taxTotal
    subtotal
    grandTotal
    discounts {
      edges {
        node {
          couponCode
        }
      }
    }
    paymentAccount {
      instruments {
        edges {
          node {
            paymentMethod
            paymentOrigin
            paymentProvider
            paymentAccountTransactions {
              edges {
                node {
                  amount
                  currency
                  transactionType
                }
              }
            }
          }
        }
      }
    }
    items {
      edges {
        node {
          productId
          quantity
          pricebookPrice
          itemDiscounts
          orderDiscounts
          tax
          shippingServiceLevel
          fulfillmentLocationId
        }
      }
    }
  }
}
ERP integration example with NetSuite
For integrations with NetSuite as an ERP system for cancellations, see this
example
.
Related topics
ERP integration playbook to sync returns
ERP integration playbook to sync appeasement refunds
ERP integration playbook to sync endless-aisle orders
ERP integration playbook to sync in-store purchases
ERP integration example with NetSuite for cancellations
Integrating a payment service provider
GraphQL API
Was this article helpful?
Yes
No
Tags
api
developer
ERP integration
event stream
events
integration
newstore platform
order
order cancellation
platform
About Us
Newsroom
Careers
Platform
Mobile POS
Omnichannel OMS
Shopping App
Hardware and Software
Stories
Point of Sale
Mobile Checkout
Endless Aisle
Clienteling
Developers
API Reference
Developer Portal
API updates
Deprecation notices
Support
Support Portal
Status
Still have questions?
We’re here to help you!
Follow Us
Platform Status
Privacy Notice for Applicants
Privacy Policy
Terms of Use